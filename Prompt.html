<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criador de Prompts Profissional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #F9FAFB;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
        .option-card {
            background-color: #1F2937;
            border: 2px solid #374151;
            transition: all 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .option-card:hover {
            border-color: #4f46e580;
            transform: translateY(-2px);
        }
        .option-card.selected {
            border-color: #4F46E5;
            background-color: #3730a3;
        }
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease-in-out;
        }
        .color-swatch:hover, .color-swatch.selected {
            border-color: #F9FAFB;
            transform: scale(1.1);
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1F2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4F46E5;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4338CA;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Criador de Prompts Profissional</h1>
            <p class="text-lg text-gray-400">Controle cada detalhe da sua criação com um fluxo inteligente.</p>
        </header>

        <!-- Progress Bar -->
        <div class="w-full bg-gray-700 rounded-full h-2.5 mb-8">
            <div id="progressBar" class="bg-indigo-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
        </div>

        <main id="prompt-builder" class="bg-gray-900 p-6 md:p-8 rounded-2xl shadow-2xl">

            <!-- Step 1: Nome da Personagem -->
            <div id="step-1" class="step active">
                <h2 class="text-2xl font-semibold mb-2">Nome e Idade da Personagem</h2>
                <p class="text-gray-400 mb-6">Comece dando um nome e uma idade para sua personagem. A idade é opcional.</p>
                <div class="space-y-4">
                    <input type="text" id="characterName" placeholder="Digite o nome da personagem" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                    <input type="number" id="characterAge" placeholder="Digite a idade (opcional)" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                </div>
                 <div class="mt-8 flex justify-end w-full">
                    <button onclick="handleNameAndAge()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 2: Faixa Etária -->
            <div id="step-2" class="step">
                <h2 class="text-2xl font-semibold mb-6">Faixa Etária</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Garota (18-22 anos)', 'a girl, approximately 18-22 years old')">
                        <h3 class="font-bold text-lg">Garota</h3><p class="text-sm text-gray-400">Aprox. 18-22 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Jovem Mulher (23-30 anos)', 'a young woman, approximately 23-30 years old')">
                        <h3 class="font-bold text-lg">Jovem Mulher</h3><p class="text-sm text-gray-400">Aprox. 23-30 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Mulher (31-45 anos)', 'a woman, approximately 31-45 years old')">
                        <h3 class="font-bold text-lg">Mulher</h3><p class="text-sm text-gray-400">Aprox. 31-45 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Mulher Madura (46+ anos)', 'a mature woman, approximately 46+ years old')">
                        <h3 class="font-bold text-lg">Mulher Madura</h3><p class="text-sm text-gray-400">Aprox. 46+ anos.</p>
                    </div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(1)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(3)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 3: Nacionalidades e Ascendências -->
            <div id="step-3" class="step">
                <h2 class="text-2xl font-semibold mb-6">Nacionalidades e Ascendências</h2>
                <div class="space-y-6">
                    <!-- Américas -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Américas</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Brasileiro / Brasileira', 'Brazilian')"><h3 class="font-bold text-sm">Brasileiro / Brasileira</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Americano / Americana', 'American')"><h3 class="font-bold text-sm">Americano / Americana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Argentino / Argentina', 'Argentinian')"><h3 class="font-bold text-sm">Argentino / Argentina</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Boliviano / Boliviana', 'Bolivian')"><h3 class="font-bold text-sm">Boliviano / Boliviana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Canadense', 'Canadian')"><h3 class="font-bold text-sm">Canadense</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Chileno / Chilena', 'Chilean')"><h3 class="font-bold text-sm">Chileno / Chilena</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Colombiano / Colombiana', 'Colombian')"><h3 class="font-bold text-sm">Colombiano / Colombiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Cubano / Cubana', 'Cuban')"><h3 class="font-bold text-sm">Cubano / Cubana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Equatoriano / Equatoriana', 'Ecuadorian')"><h3 class="font-bold text-sm">Equatoriano / Equatoriana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Haitiano / Haitiana', 'Haitian')"><h3 class="font-bold text-sm">Haitiano / Haitiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Mexicano / Mexicana', 'Mexican')"><h3 class="font-bold text-sm">Mexicano / Mexicana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Paraguaio / Paraguaia', 'Paraguayan')"><h3 class="font-bold text-sm">Paraguaio / Paraguaia</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Peruano / Peruana', 'Peruvian')"><h3 class="font-bold text-sm">Peruano / Peruana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Uruguaio / Uruguaia', 'Uruguayan')"><h3 class="font-bold text-sm">Uruguaio / Uruguaia</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Venezuelano / Venezuelana', 'Venezuelan')"><h3 class="font-bold text-sm">Venezuelano / Venezuelana</h3></div>
                        </div>
                    </div>
                    <!-- Europa -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Europa</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Espanhol / Espanhola', 'Spanish')"><h3 class="font-bold text-sm">Espanhol / Espanhola</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Alemão / Alemã', 'German')"><h3 class="font-bold text-sm">Alemão / Alemã</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Belga', 'Belgian')"><h3 class="font-bold text-sm">Belga</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Britânico / Britânica', 'British')"><h3 class="font-bold text-sm">Britânico / Britânica</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Croata', 'Croatian')"><h3 class="font-bold text-sm">Croata</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Dinamarquês / Dinamarquesa', 'Danish')"><h3 class="font-bold text-sm">Dinamarquês / Dinamarquesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Francês / Francesa', 'French')"><h3 class="font-bold text-sm">Francês / Francesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Grego / Grega', 'Greek')"><h3 class="font-bold text-sm">Grego / Grega</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Holandês / Holandesa', 'Dutch')"><h3 class="font-bold text-sm">Holandês / Holandesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Irlandês / Irlandesa', 'Irish')"><h3 class="font-bold text-sm">Irlandês / Irlandesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Italiano / Italiana', 'Italian')"><h3 class="font-bold text-sm">Italiano / Italiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Polonês / Polonesa', 'Polish')"><h3 class="font-bold text-sm">Polonês / Polonesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Português / Portuguesa', 'Portuguese')"><h3 class="font-bold text-sm">Português / Portuguesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Romeno / Romena', 'Romanian')"><h3 class="font-bold text-sm">Romeno / Romena</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Russo / Russa', 'Russian')"><h3 class="font-bold text-sm">Russo / Russa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Sueco / Sueca', 'Swedish')"><h3 class="font-bold text-sm">Sueco / Sueca</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Suíço / Suíça', 'Swiss')"><h3 class="font-bold text-sm">Suíço / Suíça</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Ucraniano / Ucraniana', 'Ukrainian')"><h3 class="font-bold text-sm">Ucraniano / Ucraniana</h3></div>
                        </div>
                    </div>
                     <!-- Ásia -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Ásia</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Chinês / Chinesa', 'Chinese')"><h3 class="font-bold text-sm">Chinês / Chinesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Japonês / Japonesa', 'Japanese')"><h3 class="font-bold text-sm">Japonês / Japonesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Afegão / Afegã', 'Afghan')"><h3 class="font-bold text-sm">Afegão / Afegã</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Coreano / Coreana', 'Korean')"><h3 class="font-bold text-sm">Coreano / Coreana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Filipino / Filipina', 'Filipino')"><h3 class="font-bold text-sm">Filipino / Filipina</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Indiano / Indiana', 'Indian')"><h3 class="font-bold text-sm">Indiano / Indiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Indonésio / Indonésia', 'Indonesian')"><h3 class="font-bold text-sm">Indonésio / Indonésia</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Iraniano / Iraniana', 'Iranian')"><h3 class="font-bold text-sm">Iraniano / Iraniana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Iraquiano / Iraquiana', 'Iraqi')"><h3 class="font-bold text-sm">Iraquiano / Iraquiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Israelense', 'Israeli')"><h3 class="font-bold text-sm">Israelense</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Libanês / Libanesa', 'Lebanese')"><h3 class="font-bold text-sm">Libanês / Libanesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Paquistanês / Paquistanesa', 'Pakistani')"><h3 class="font-bold text-sm">Paquistanês / Paquistanesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Palestino / Palestina', 'Palestinian')"><h3 class="font-bold text-sm">Palestino / Palestina</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Sírio / Síria', 'Syrian')"><h3 class="font-bold text-sm">Sírio / Síria</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Tailandês / Tailandesa', 'Thai')"><h3 class="font-bold text-sm">Tailandês / Tailandesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Turco / Turca', 'Turkish')"><h3 class="font-bold text-sm">Turco / Turca</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Vietnamita', 'Vietnamese')"><h3 class="font-bold text-sm">Vietnamita</h3></div>
                        </div>
                    </div>
                     <!-- África -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">África</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Angolano / Angolana', 'Angolan')"><h3 class="font-bold text-sm">Angolano / Angolana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Argelino / Argelina', 'Algerian')"><h3 class="font-bold text-sm">Argelino / Argelina</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Cabo-verdiano / Cabo-verdiana', 'Cape Verdean')"><h3 class="font-bold text-sm">Cabo-verdiano / Cabo-verdiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Congolês / Congolesa', 'Congolese')"><h3 class="font-bold text-sm">Congolês / Congolesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Egípcio / Egípcia', 'Egyptian')"><h3 class="font-bold text-sm">Egípcio / Egípcia</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Ganês / Ganesa', 'Ghanaian')"><h3 class="font-bold text-sm">Ganês / Ganesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Marroquino / Marroquina', 'Moroccan')"><h3 class="font-bold text-sm">Marroquino / Marroquina</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Moçambicano / Moçambicana', 'Mozambican')"><h3 class="font-bold text-sm">Moçambicano / Moçambicana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Nigeriano / Nigeriana', 'Nigerian')"><h3 class="font-bold text-sm">Nigeriano / Nigeriana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Senegalês / Senegalesa', 'Senegalese')"><h3 class="font-bold text-sm">Senegalês / Senegalesa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Sul-africano / Sul-africana', 'South African')"><h3 class="font-bold text-sm">Sul-africano / Sul-africana</h3></div>
                        </div>
                    </div>
                     <!-- Oceania -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Oceania</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Australiano / Australiana', 'Australian')"><h3 class="font-bold text-sm">Australiano / Australiana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Neozelandês / Neozelandesa', 'New Zealander')"><h3 class="font-bold text-sm">Neozelandês / Neozelandesa</h3></div>
                        </div>
                    </div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Nenhum', '')"><h3 class="font-bold text-sm">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(promptData.ageIsNumeric ? 1 : 2)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(4)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 4: Biotipo Físico -->
            <div id="step-4" class="step">
                <h2 class="text-2xl font-semibold mb-6">Biotipo Físico</h2>
                <div class="space-y-6">
                    <!-- Peso e Estrutura -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Peso e Estrutura</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Magra / Magrinha', 'thin body, low body fat')"><h3 class="font-bold text-sm">Magra / Magrinha</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Magrela', 'extremely thin body')"><h3 class="font-bold text-sm">Magrela</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Fina / Delgada', 'slender, elegant, and slim body')"><h3 class="font-bold text-sm">Fina / Delgada</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Cheinha / Fofinha', 'chubby, soft body with some body fat')"><h3 class="font-bold text-sm">Cheinha / Fofinha</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Gorda / Gordinha', 'fat, plump body with plenty of body fat')"><h3 class="font-bold text-sm">Gorda / Gordinha</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Plus Size', 'plus-size body type')"><h3 class="font-bold text-sm">Plus Size</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Robusta / Forte', 'robust, strong, wide body frame')"><h3 class="font-bold text-sm">Robusta / Forte</h3></div>
                        </div>
                    </div>
                    <!-- Músculos e Definição -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Músculos e Definição</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Sarada', 'toned body with well-defined muscles and low fat')"><h3 class="font-bold text-sm">Sarada</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Malhada', 'fit body, toned from working out')"><h3 class="font-bold text-sm">Malhada</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Definida', 'defined body with visible muscles')"><h3 class="font-bold text-sm">Definida</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Musculosa', 'muscular body with large muscle volume')"><h3 class="font-bold text-sm">Musculosa</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Atlética', 'athletic body, functional and strong')"><h3 class="font-bold text-sm">Atlética</h3></div>
                        </div>
                    </div>
                    <!-- Curvas e Proporções -->
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Curvas e Proporções</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Gostosa / Gostoso', 'voluptuous, curvy and attractive body')"><h3 class="font-bold text-sm">Gostosa / Gostoso</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Corpão / Violão', 'hourglass figure, very curvy body with wide hips and bust, and a thin waist')"><h3 class="font-bold text-sm">Corpão / Violão</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Boazuda', 'very voluptuous and curvy body')"><h3 class="font-bold text-sm">Boazuda</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Curvilínea / Voluptuosa', 'curvaceous, voluptuous body with full shapes')"><h3 class="font-bold text-sm">Curvilínea / Voluptuosa</h3></div>
                        </div>
                    </div>
                     <div class="option-card p-3 rounded-lg cursor-pointer mt-4" onclick="handleSelection(this, 'bodyType', 'Nenhum', '')"><h3 class="font-bold text-sm">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(3)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(5)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>
            
            <!-- Step 5: Cor da Pele -->
            <div id="step-5" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor da Pele</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Clara', 'light, rosy skin tone')"><h3 class="font-bold">Pele Clara</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Pálida', 'pale, very light skin')"><h3 class="font-bold">Pele Pálida</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Bronzeada', 'tanned, golden skin tone')"><h3 class="font-bold">Pele Bronzeada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Oliva', 'olive, yellowish/greenish skin tone')"><h3 class="font-bold">Pele Oliva</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Escura', 'dark brown skin tone')"><h3 class="font-bold">Pele Escura</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele com Sardas', 'skin with freckles')"><h3 class="font-bold">Pele com Sardas</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(4)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(6)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 6: Comprimento do Cabelo -->
            <div id="step-6" class="step">
                <h2 class="text-2xl font-semibold mb-6">Comprimento do Cabelo</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Longo', 'long hair')"><h3 class="font-bold">Longo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Médio', 'medium hair')"><h3 class="font-bold">Médio</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Curto', 'short hair')"><h3 class="font-bold">Curto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Raspado', 'shaved hair')"><h3 class="font-bold">Raspado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(5)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(7)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 7: Corte de Cabelo e Penteado -->
            <div id="step-7" class="step">
                <h2 class="text-2xl font-semibold mb-6">Corte de Cabelo e Penteado</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- Cabelo LONGO -->
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Corte em Camadas Longas', 'long layers')"><h3 class="font-bold">Corte em Camadas</h3><p class="text-sm text-gray-400 mt-1">Cria movimento e volume em cabelos longos.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Corte Reto Longo', 'long blunt cut')"><h3 class="font-bold">Corte Reto</h3><p class="text-sm text-gray-400 mt-1">Linhas retas e limpas, ideal para um visual polido.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Shaggy Hair Longo', 'long shaggy hair')"><h3 class="font-bold">Shaggy Hair</h3><p class="text-sm text-gray-400 mt-1">Visual despojado com camadas repicadas e textura.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Franja Cortininha', 'curtain bangs')"><h3 class="font-bold">Franja Cortininha</h3><p class="text-sm text-gray-400 mt-1">Franja dividida ao meio, emoldura o rosto suavemente.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Rabo de Cavalo Alto e Polido', 'high polished ponytail')"><h3 class="font-bold">Rabo de Cavalo Alto</h3><p class="text-sm text-gray-400 mt-1">Penteado elegante e justo, posicionado no topo da cabeça.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Ondas Sereia', 'mermaid waves')"><h3 class="font-bold">Ondas "Sereia"</h3><p class="text-sm text-gray-400 mt-1">Ondas largas e uniformes, criando um visual romântico.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Meio Preso', 'half-up hairstyle')"><h3 class="font-bold">Meio Preso</h3><p class="text-sm text-gray-400 mt-1">Parte superior do cabelo presa, deixando o resto solto.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Trança Boxeadora Dupla', 'double boxer braids')"><h3 class="font-bold">Trança Boxeadora</h3><p class="text-sm text-gray-400 mt-1">Duas tranças embutidas firmes, da raiz às pontas.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Franja Reta e Cheia', 'long hair with full straight bangs')"><h3 class="font-bold">Franja Reta e Cheia</h3><p class="text-sm text-gray-400 mt-1">Franja densa que cobre a testa, um clássico.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Efeito Molhado', 'wet look hairstyle')"><h3 class="font-bold">Efeito Molhado</h3><p class="text-sm text-gray-400 mt-1">Cabelo com aparência úmida, penteado para trás.</p></div>
                    <!-- Cabelo MÉDIO -->
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Long Bob (Lob)', 'long bob (lob)')"><h3 class="font-bold">Long Bob (Lob)</h3><p class="text-sm text-gray-400 mt-1">Versão mais longa do Chanel, na altura dos ombros.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Chanel de Bico', 'A-line bob')"><h3 class="font-bold">Chanel de Bico</h3><p class="text-sm text-gray-400 mt-1">Mais curto atrás e com pontas longas na frente.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Blunt Cut Médio', 'medium blunt cut')"><h3 class="font-bold">Blunt Cut</h3><p class="text-sm text-gray-400 mt-1">Corte reto e sem camadas, para um look moderno.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Shaggy Médio', 'medium shaggy hair')"><h3 class="font-bold">Shaggy</h3><p class="text-sm text-gray-400 mt-1">Camadas repicadas para um visual rock'n'roll.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Clavicut', 'clavicut')"><h3 class="font-bold">Clavicut</h3><p class="text-sm text-gray-400 mt-1">Corte médio reto que toca a clavícula.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Ondas Suaves', 'soft beach waves')"><h3 class="font-bold">Ondas Suaves</h3><p class="text-sm text-gray-400 mt-1">Ondas leves e naturais, como as de praia.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Liso Escorrido com Divisão Central', 'sleek straight hair with a center part')"><h3 class="font-bold">Liso com Divisão Central</h3><p class="text-sm text-gray-400 mt-1">Visual minimalista com cabelo liso e partido ao meio.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium" onclick="handleSelection(this, 'hairStyle', 'Glass Hair', 'glass hair look')"><h3 class="font-bold">Glass Hair</h3><p class="text-sm text-gray-400 mt-1">Cabelo extremamente liso e com brilho espelhado.</p></div>
                    <!-- Cabelo CURTO -->
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Pixie Cut Clássico', 'classic pixie cut')"><h3 class="font-bold">Pixie Cut</h3><p class="text-sm text-gray-400 mt-1">Curto na nuca e lados, com mais volume no topo.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Short Bob (Chanel Curto)', 'short bob')"><h3 class="font-bold">Short Bob (Chanel)</h3><p class="text-sm text-gray-400 mt-1">Corte clássico e elegante na altura do queixo.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Bixie Cut', 'bixie cut')"><h3 class="font-bold">Bixie Cut</h3><p class="text-sm text-gray-400 mt-1">Mistura entre o Bob e o Pixie, mais longo que o Pixie.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Topete (Pompadour)', 'pompadour hairstyle')"><h3 class="font-bold">Topete (Pompadour)</h3><p class="text-sm text-gray-400 mt-1">Cabelo penteado para cima e para trás, com volume.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Slicked Back Curto', 'slicked back short hair')"><h3 class="font-bold">Slicked Back</h3><p class="text-sm text-gray-400 mt-1">Cabelo curto penteado para trás com gel ou pomada.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Franja Curta (Baby Bangs)', 'short hair with baby bangs')"><h3 class="font-bold">Franja Curta</h3><p class="text-sm text-gray-400 mt-1">Franja bem acima das sobrancelhas, um look ousado.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Undercut Feminino', 'female undercut')"><h3 class="font-bold">Undercut</h3><p class="text-sm text-gray-400 mt-1">Laterais e/ou nuca raspadas, com topo mais longo.</p></div>
                     <!-- Cabelo RASPADO -->
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="shaved" onclick="handleSelection(this, 'hairStyle', 'Buzz Cut Uniforme', 'uniform buzz cut')"><h3 class="font-bold">Buzz Cut Uniforme</h3><p class="text-sm text-gray-400 mt-1">Raspado com a mesma altura em toda a cabeça.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="shaved" onclick="handleSelection(this, 'hairStyle', 'Buzz Cut com Degradê', 'buzz cut with a fade')"><h3 class="font-bold">Buzz Cut com Degradê</h3><p class="text-sm text-gray-400 mt-1">Raspado com um efeito degradê nas laterais (fade).</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="shaved" onclick="handleSelection(this, 'hairStyle', 'Careca', 'completely bald, razor shaved')"><h3 class="font-bold">Careca</h3><p class="text-sm text-gray-400 mt-1">Cabeça totalmente raspada com navalha, sem cabelo.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="shaved" onclick="handleSelection(this, 'hairStyle', 'Hair Tattoo', 'hair tattoo, razor designs')"><h3 class="font-bold">Hair Tattoo</h3><p class="text-sm text-gray-400 mt-1">Desenhos feitos com navalha no cabelo raspado.</p></div>
                    <!-- Nenhum -->
                    <div class="option-card p-4 rounded-lg cursor-pointer col-span-2 md:col-span-3" data-lengths="long,medium,short,shaved" onclick="handleSelection(this, 'hairStyle', 'Nenhum', '')"><h3 class="font-bold">Nenhum / Não especificar</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(6)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(8)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 8: Cor do Cabelo -->
            <div id="step-8" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor do Cabelo</h2>
                <div class="grid grid-cols-3 md:grid-cols-4 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Preto', 'black hair')"><h3 class="font-bold">Preto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Loiro', 'blonde hair')"><h3 class="font-bold">Loiro</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Castanho', 'brown hair')"><h3 class="font-bold">Castanho</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Ruivo', 'red hair')"><h3 class="font-bold">Ruivo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Branco/Platinado', 'white/platinum hair')"><h3 class="font-bold">Branco/Platinado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Rosa', 'pink hair')"><h3 class="font-bold">Rosa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Azul', 'blue hair')"><h3 class="font-bold">Azul</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Verde', 'green hair')"><h3 class="font-bold">Verde</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(7)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(9)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 9: Cor dos Olhos -->
            <div id="step-9" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor dos Olhos</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Azuis Claros', 'light blue eyes')"><h3 class="font-bold">Azuis Claros</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Azuis Escuros', 'dark blue eyes')"><h3 class="font-bold">Azuis Escuros</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Verdes Claros', 'light green eyes')"><h3 class="font-bold">Verdes Claros</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Verdes Escuros', 'dark green eyes')"><h3 class="font-bold">Verdes Escuros</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Castanhos Claros', 'light brown eyes')"><h3 class="font-bold">Castanhos Claros</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Castanhos Escuros', 'dark brown eyes')"><h3 class="font-bold">Castanhos Escuros</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Cor de Mel', 'honey-colored eyes')"><h3 class="font-bold">Cor de Mel</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Cinza Claro', 'light gray eyes')"><h3 class="font-bold">Cinza Claro</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Cinza Escuro', 'dark gray eyes')"><h3 class="font-bold">Cinza Escuro</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Pretos', 'black eyes')"><h3 class="font-bold">Pretos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Heterocromia', 'heterochromia eyes')"><h3 class="font-bold">Heterocromia</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(8)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(10)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 10: Tamanho dos Seios -->
            <div id="step-10" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tamanho dos Seios</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Reto (Flat)', 'flat chest')"><h3 class="font-bold">Reto (Flat)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Pequenos', 'small breasts')"><h3 class="font-bold">Pequenos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Médios', 'medium breasts')"><h3 class="font-bold">Médios</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Grandes', 'large breasts')"><h3 class="font-bold">Grandes</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Volumosos', 'voluminous breasts')"><h3 class="font-bold">Volumosos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(9)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(11)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 11: Composição da Cena -->
            <div id="step-11" class="step">
                <h2 class="text-2xl font-semibold mb-6">Composição da Cena</h2>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Orientação da Personagem</h3>
                    <div class="grid grid-cols-3 gap-4">
                        <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleViewSelection(this, 'characterView', 'Frente', 'facing the camera')"><h3 class="font-bold">De Frente</h3></div>
                        <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleViewSelection(this, 'characterView', 'Lado', 'side view')"><h3 class="font-bold">De Lado</h3></div>
                        <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleViewSelection(this, 'characterView', 'Costas', 'from behind')"><h3 class="font-bold">De Costas</h3></div>
                    </div>
                </div>

                <div>
                    <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Enquadramento e Composição (Múltipla Escolha)</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'full body shot, long shot')"><h3 class="font-bold text-sm">Corpo Inteiro</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'medium shot')"><h3 class="font-bold text-sm">Plano Médio</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'close-up shot on face')"><h3 class="font-bold text-sm">Close-up no Rosto</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'extreme close-up on a detail')"><h3 class="font-bold text-sm">Plano Detalhe</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'low angle shot')"><h3 class="font-bold text-sm">Ângulo Baixo</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'high angle shot')"><h3 class="font-bold text-sm">Ângulo Alto</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'dutch angle')"><h3 class="font-bold text-sm">Ângulo Holandês</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'point of view (POV)')"><h3 class="font-bold text-sm">Ponto de Vista (POV)</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'over the shoulder shot')"><h3 class="font-bold text-sm">Sobre o Ombro</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'american shot, medium long shot')"><h3 class="font-bold text-sm">Plano Americano</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'establishing shot, wide shot')"><h3 class="font-bold text-sm">Plano Geral Amplo</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'two-shot or group shot')"><h3 class="font-bold text-sm">Plano Conjunto</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'rule of thirds composition')"><h3 class="font-bold text-sm">Regra dos Terços</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'leading lines composition')"><h3 class="font-bold text-sm">Linhas Guia</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'frame within a frame composition')"><h3 class="font-bold text-sm">Enquadramento Natural</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'symmetrical composition, centered subject')"><h3 class="font-bold text-sm">Simetria e Ponto Central</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'negative space composition')"><h3 class="font-bold text-sm">Espaço Negativo</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'shallow depth of field or deep depth of field')"><h3 class="font-bold text-sm">Profundidade de Campo</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'macro view')"><h3 class="font-bold text-sm">Visão Macro</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'focused framing')"><h3 class="font-bold text-sm">Enquadramento com Foco</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'centered framing')"><h3 class="font-bold text-sm">Enquadramento Centralizado</h3></div>
                        <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'sceneComposition', 'shot from a low angle, looking up')"><h3 class="font-bold text-sm">Visão Inferior</h3></div>
                    </div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(10)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(12)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 12: Estilo da Personagem -->
            <div id="step-12" class="step">
                <h2 class="text-2xl font-semibold mb-6">Estilo da Personagem</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Fantasia: Elfa', 'fantasy elf style')"><h3 class="font-bold">Fantasia: Elfa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Fantasia: Guerreira', 'fantasy warrior style')"><h3 class="font-bold">Fantasia: Guerreira</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Sci-Fi: Cyberpunk', 'sci-fi cyberpunk style')"><h3 class="font-bold">Sci-Fi: Cyberpunk</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Sci-Fi: Androide', 'sci-fi android style')"><h3 class="font-bold">Sci-Fi: Androide</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: Gótica', 'modern gothic style')"><h3 class="font-bold">Moderno: Gótica</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: E-girl', 'modern e-girl style')"><h3 class="font-bold">Moderno: E-girl</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: Fitness', 'modern fitness style')"><h3 class="font-bold">Moderno: Fitness</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: Casual', 'modern casual style')"><h3 class="font-bold">Moderno: Casual</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Histórico: Vitoriano', 'historical victorian style')"><h3 class="font-bold">Histórico: Vitoriano</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Histórico: Medieval', 'historical medieval style')"><h3 class="font-bold">Histórico: Medieval</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Steampunk', 'steampunk style')"><h3 class="font-bold">Steampunk</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Pós-apocalíptico', 'post-apocalyptic style')"><h3 class="font-bold">Pós-apocalíptico</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer col-span-2 md:col-span-1" onclick="handleSelection(this, 'characterStyle', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(11)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(13)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 13: Maquiagem -->
            <div id="step-13" class="step">
                <h2 class="text-2xl font-semibold mb-6">Maquiagem</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Natural', 'natural makeup')"><h3 class="font-bold">Natural</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Olho Esfumado', 'smokey eyes makeup')"><h3 class="font-bold">Olho Esfumado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Glamour', 'glamour makeup')"><h3 class="font-bold">Glamour</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Gótica', 'gothic makeup')"><h3 class="font-bold">Gótica</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Cores Neon', 'neon colors makeup')"><h3 class="font-bold">Cores Neon</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Artística', 'artistic makeup')"><h3 class="font-bold">Artística</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Nenhuma', 'no makeup')"><h3 class="font-bold">Nenhuma</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(12)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(14)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 14: Acessórios -->
            <div id="step-14" class="step">
                <h2 class="text-2xl font-semibold mb-6">Acessórios (múltipla escolha)</h2>
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Estilos</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="toggleAccessoryStyle(this, 'gothic-accessories')"><h3 class="font-bold text-sm">Gótica</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="toggleAccessoryStyle(this, 'rocker-accessories')"><h3 class="font-bold text-sm">Rockeira</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="toggleAccessoryStyle(this, 'bdsm-accessories')"><h3 class="font-bold text-sm">Sadomasoquista</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="toggleAccessoryStyle(this, 'preppy-accessories')"><h3 class="font-bold text-sm">Patricinha</h3></div>
                        </div>
                    </div>
                    <!-- GOTHIC ACCESSORIES (HIDDEN) -->
                    <div id="gothic-accessories" class="hidden space-y-4">
                        <h4 class="text-lg font-medium text-gray-300">Acessórios Góticos</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                           <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'velvet choker')"><h3 class="font-bold text-sm">Choker de Veludo</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather harness')"><h3 class="font-bold text-sm">Harness de Couro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'belt with ornate buckle')"><h3 class="font-bold text-sm">Cinto com Fivela Elaborada</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'pants chains')"><h3 class="font-bold text-sm">Correntes para Calças</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'lace or fishnet gloves')"><h3 class="font-bold text-sm">Luvas de Renda/Arrastão</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'crucifix or ankh necklaces')"><h3 class="font-bold text-sm">Colares de Crucifixo/Ankh</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'rings with dark stones')"><h3 class="font-bold text-sm">Anéis com Pedras Escuras</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'hoop earrings with cross pendants')"><h3 class="font-bold text-sm">Brincos de Argola com Cruz</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'fishnet or victorian pattern tights')"><h3 class="font-bold text-sm">Meia-calça Arrastão/Vitoriana</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'coffin-shaped bag')"><h3 class="font-bold text-sm">Bolsa de Caixão</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'cameo or insect brooches')"><h3 class="font-bold text-sm">Broches de Camafeu/Insetos</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wide-brimmed hat or top hat')"><h3 class="font-bold text-sm">Chapéu de Aba Larga/Cartola</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'round vintage sunglasses')"><h3 class="font-bold text-sm">Óculos de Sol Vintage</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather bracelet with spikes')"><h3 class="font-bold text-sm">Pulseira de Couro com Spikes</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'hair accessories with black feathers')"><h3 class="font-bold text-sm">Acessórios de Cabelo com Penas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'spiked garter')"><h3 class="font-bold text-sm">Gargantilha com Spikes</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leg harness')"><h3 class="font-bold text-sm">Leg-harness</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'septum or lip piercing')"><h3 class="font-bold text-sm">Piercings (Septo, Lábio)</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'platform ankle boots')"><h3 class="font-bold text-sm">Ankle Boots com Plataforma</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'short or long veils')"><h3 class="font-bold text-sm">Véus</h3></div>
                        </div>
                    </div>
                     <!-- ROCKER ACCESSORIES (HIDDEN) -->
                    <div id="rocker-accessories" class="hidden space-y-4">
                        <h4 class="text-lg font-medium text-gray-300">Acessórios Rockeira</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'perfecto leather jacket')"><h3 class="font-bold text-sm">Jaqueta de Couro Perfecto</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'bandana')"><h3 class="font-bold text-sm">Bandanas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'studded leather belt')"><h3 class="font-bold text-sm">Cinto de Couro com Tachas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather wristbands with rivets')"><h3 class="font-bold text-sm">Pulseiras de Couro com Rebites</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'band logo wristbands')"><h3 class="font-bold text-sm">Munhequeiras</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'guitar pick necklace')"><h3 class="font-bold text-sm">Colar com Palheta</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'silver skull rings')"><h3 class="font-bold text-sm">Anéis de Caveira</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'thick chains')"><h3 class="font-bold text-sm">Correntes Grossas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'aviator sunglasses')"><h3 class="font-bold text-sm">Óculos de Sol Aviador</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'combat boots')"><h3 class="font-bold text-sm">Botas de Combate</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'band patches on jacket')"><h3 class="font-bold text-sm">Patches de Bandas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'trucker hat')"><h3 class="font-bold text-sm">Boné Trucker</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'fishnet stockings')"><h3 class="font-bold text-sm">Meias Arrastão</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'large hoop earrings')"><h3 class="font-bold text-sm">Brincos de Argola Grandes</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'skull or plaid scarf')"><h3 class="font-bold text-sm">Lenços de Caveira/Xadrez</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'fingerless leather gloves')"><h3 class="font-bold text-sm">Luvas sem Dedos</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wallet with chain')"><h3 class="font-bold text-sm">Carteira com Corrente</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'canvas belt with metal buckle')"><h3 class="font-bold text-sm">Cinto de Lona</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'chain anklets')"><h3 class="font-bold text-sm">Tornozeleiras de Corrente</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'band pins')"><h3 class="font-bold text-sm">Pins de Bandas</h3></div>
                        </div>
                    </div>
                    <!-- BDSM ACCESSORIES (HIDDEN) -->
                    <div id="bdsm-accessories" class="hidden space-y-4">
                        <h4 class="text-lg font-medium text-gray-300">Acessórios Sadomasoquista</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                           <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'full body harness')"><h3 class="font-bold text-sm">Harness de Corpo Inteiro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather collar with O-ring')"><h3 class="font-bold text-sm">Coleira de Couro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather or metal cuffs')"><h3 class="font-bold text-sm">Algemas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'ball gag or tape gag')"><h3 class="font-bold text-sm">Mordaças</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'whip or riding crop')"><h3 class="font-bold text-sm">Chicotes</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather or latex mask')"><h3 class="font-bold text-sm">Máscaras</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'aesthetic chastity belt')"><h3 class="font-bold text-sm">Cinto de Castidade</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'ring gag')"><h3 class="font-bold text-sm">Gag de Anel</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'heavy metal body chains')"><h3 class="font-bold text-sm">Body Chains</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'elbow-length latex gloves')"><h3 class="font-bold text-sm">Luvas de Látex</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'vinyl thigh-high stockings with garter belt')"><h3 class="font-bold text-sm">Meias 7/8 de Vinil</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'nipple pasties')"><h3 class="font-bold text-sm">Pasties</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wide leather cuffs')"><h3 class="font-bold text-sm">Cuffs de Couro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leash chains')"><h3 class="font-bold text-sm">Correntes de Coleira</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'nipple or genital piercings')"><h3 class="font-bold text-sm">Piercings Estratégicos</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'thigh-high stiletto boots')"><h3 class="font-bold text-sm">Botas de Cano Altíssimo</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather or vinyl corset')"><h3 class="font-bold text-sm">Espartilho de Couro/Vinil</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'leather eyepatch')"><h3 class="font-bold text-sm">Tapa-olho de Couro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'aesthetic tail plug')"><h3 class="font-bold text-sm">Plugue de Cauda</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'body jewelry with chains')"><h3 class="font-bold text-sm">Joias para o Corpo</h3></div>
                        </div>
                    </div>
                     <!-- PREPPY ACCESSORIES (HIDDEN) -->
                    <div id="preppy-accessories" class="hidden space-y-4">
                        <h4 class="text-lg font-medium text-gray-300">Acessórios Patricinha</h4>
                        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                           <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'designer handbag')"><h3 class="font-bold text-sm">Bolsa de Grife</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'padded or pearl headband')"><h3 class="font-bold text-sm">Tiara Acolchoada/Pérolas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'ribbon bows in hair')"><h3 class="font-bold text-sm">Laços de Fita</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'large designer sunglasses')"><h3 class="font-bold text-sm">Óculos de Sol Grandes</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'initial pendant necklace')"><h3 class="font-bold text-sm">Colar de Inicial</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'charm bracelet')"><h3 class="font-bold text-sm">Pulseira de Berloques</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'pearl or diamond stud earrings')"><h3 class="font-bold text-sm">Brincos de Pérola/Brilhantes</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'gold-plated watch')"><h3 class="font-bold text-sm">Relógio de Marca</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'designer silk scarf')"><h3 class="font-bold text-sm">Lenço de Seda</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'thin leather belt')"><h3 class="font-bold text-sm">Cinto Fino de Couro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'ballet flats')"><h3 class="font-bold text-sm">Sapatilhas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'high-heeled pumps')"><h3 class="font-bold text-sm">Scarpins</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'rhinestone hair clips')"><h3 class="font-bold text-sm">Presilhas com Strass</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'delicate stackable rings')"><h3 class="font-bold text-sm">Anéis Delicados</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'designer phone case with chain')"><h3 class="font-bold text-sm">Porta-celular de Grife</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'designer makeup bag')"><h3 class="font-bold text-sm">Necessaire de Marca</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'plush keychain')"><h3 class="font-bold text-sm">Chaveiro de Pelúcia</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'fabric headbands')"><h3 class="font-bold text-sm">Faixas de Cabelo</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'sheer neutral-colored tights')"><h3 class="font-bold text-sm">Meias-calças Finas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'short leather gloves in pastel colors')"><h3 class="font-bold text-sm">Luvas de Couro Curtas</h3></div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(13)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'tattooDescription', 'tattooDescription', 15)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 15: Expressão Facial -->
            <div id="step-15" class="step">
                <h2 class="text-2xl font-semibold mb-6">Expressão Facial (Múltipla Escolha)</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'seductive expression')"><h3 class="font-bold">Sedutora</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'confident expression')"><h3 class="font-bold">Confiante</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'sad expression')"><h3 class="font-bold">Triste</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'angry expression')"><h3 class="font-bold">Irritada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'happy, smiling expression')"><h3 class="font-bold">Feliz/Sorrindo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'thoughtful expression')"><h3 class="font-bold">Pensativa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'scared expression')"><h3 class="font-bold">Assustada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'bored expression')"><h3 class="font-bold">Entediada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'sweet, gentle expression')"><h3 class="font-bold">Meiga</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'cute expression')"><h3 class="font-bold">Fofinha</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'shouting, screaming expression')"><h3 class="font-bold">Gritando</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'crying expression')"><h3 class="font-bold">Chorando</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'facialExpression', 'with tears in eyes')"><h3 class="font-bold">Lágrimas</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(14)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(16)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 16: Pose Corporal -->
            <div id="step-16" class="step">
                <h2 class="text-2xl font-semibold mb-6">Pose Corporal (Múltipla Escolha)</h2>
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Poses Básicas e Cotidianas</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'standing pose')"><h3 class="font-bold text-sm">Em pé</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'sitting pose')"><h3 class="font-bold text-sm">Sentada(o)</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'lying down pose')"><h3 class="font-bold text-sm">Deitada(o)</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'walking pose')"><h3 class="font-bold text-sm">Andando</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'running pose')"><h3 class="font-bold text-sm">Correndo</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'dancing pose')"><h3 class="font-bold text-sm">Dançando</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'leaning pose')"><h3 class="font-bold text-sm">Encostada(o)</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'squatting pose')"><h3 class="font-bold text-sm">Agachada(o)</h3></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Poses de Ação e Movimento</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'fighting stance')"><h3 class="font-bold text-sm">Pose de Luta</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'action pose (jumping, climbing)')"><h3 class="font-bold text-sm">Pose de Ação</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'superhero pose')"><h3 class="font-bold text-sm">Pose de Super-herói</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'kneeling pose')"><h3 class="font-bold text-sm">Ajoelhada(o)</h3></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Poses Sensuais e Provocantes</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'on all fours')"><h3 class="font-bold text-sm">De Quatro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'legs spread')"><h3 class="font-bold text-sm">Pernas Abertas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'arched back')"><h3 class="font-bold text-sm">Arqueada(o)</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'butt pushed back')"><h3 class="font-bold text-sm">Bunda Empinada para Trás</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'focus on the ass')"><h3 class="font-bold text-sm">Foco da Bunda</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'focus on pussy')"><h3 class="font-bold text-sm">Foco na Buceta</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'spread pussy')"><h3 class="font-bold text-sm">Buceta Aberta</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'closed pussy')"><h3 class="font-bold text-sm">Buceta Fechada</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'crossed legs')"><h3 class="font-bold text-sm">Pernas Cruzadas</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'kneeling')"><h3 class="font-bold text-sm">Ajoelhada (sensual)</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'masturbating')"><h3 class="font-bold text-sm">Masturbação</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'fingers in pussy')"><h3 class="font-bold text-sm">Dedos na Buceta</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'fingers in anus')"><h3 class="font-bold text-sm">Dedos no Ânus</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'looking over the shoulder')"><h3 class="font-bold text-sm">Olhar por Cima do Ombro</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'pulling on clothing')"><h3 class="font-bold text-sm">Puxando a Roupa</h3></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4 text-indigo-400 border-b border-gray-700 pb-2">Poses Expressivas e Artísticas</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'yoga pose (e.g., lotus, warrior)')"><h3 class="font-bold text-sm">Pose de Yoga</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'contortionist pose')"><h3 class="font-bold text-sm">Contorcionismo</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'fetal position')"><h3 class="font-bold text-sm">Pose Fetal</h3></div>
                            <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'bodyPose', 'hugging self')"><h3 class="font-bold text-sm">Abraçando a si mesma(o)</h3></div>
                        </div>
                    </div>
                </div>
                 <textarea id="bodyPoseManual" placeholder="Ou escreva a pose aqui..." class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(15)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'bodyPoseManual', 'manualPose', 17)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 17: Tipo de Vestimenta -->
            <div id="step-17" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tipo de Vestimenta</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'clothing', 'nude', 'nude')"><h3 class="font-bold">Totalmente Nua</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'clothing', 'underwear', 'underwear')"><h3 class="font-bold">Apenas Roupa Íntima</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'clothing', 'clothed', 'clothed')"><h3 class="font-bold">Vestida</h3></div>
                </div>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(16)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleClothingChoice()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 18: Calcinha -->
            <div id="step-18" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tipo de Calcinha</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Clássica', 'classic cut panties')"><h3 class="font-bold text-sm">Clássica</h3><p class="text-xs text-gray-400 mt-1">Cobertura moderada, confortável.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Biquíni', 'bikini cut panties')"><h3 class="font-bold text-sm">Biquíni</h3><p class="text-xs text-gray-400 mt-1">Corte mais baixo e cavado que a clássica.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Caleçon', 'boyshort panties')"><h3 class="font-bold text-sm">Caleçon</h3><p class="text-xs text-gray-400 mt-1">Formato de shortinho, cobre o bumbum.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Cintura Alta', 'high-waist panties')"><h3 class="font-bold text-sm">Cintura Alta</h3><p class="text-xs text-gray-400 mt-1">Cobre o umbigo, modela a silhueta.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Fio Dental', 'thong')"><h3 class="font-bold text-sm">Fio Dental</h3><p class="text-xs text-gray-400 mt-1">Mínima cobertura atrás, não marca.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Tanga', 'tanga panties')"><h3 class="font-bold text-sm">Tanga</h3><p class="text-xs text-gray-400 mt-1">Maior que o fio dental, pouca cobertura.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Strappy', 'strappy panties')"><h3 class="font-bold text-sm">Strappy</h3><p class="text-xs text-gray-400 mt-1">Com tiras decorativas no quadril.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Asa Delta', 'high-leg or V-cut panties')"><h3 class="font-bold text-sm">Asa Delta</h3><p class="text-xs text-gray-400 mt-1">Laterais super cavadas, alongam as pernas.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Sem Costura', 'seamless panties')"><h3 class="font-bold text-sm">Sem Costura</h3><p class="text-xs text-gray-400 mt-1">Corte a laser, invisível sob a roupa.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Calcinha de Renda', 'lace panties')"><h3 class="font-bold text-sm">De Renda</h3><p class="text-xs text-gray-400 mt-1">Feita parcial ou totalmente em renda.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Aberta', 'crotchless panties')"><h3 class="font-bold text-sm">Aberta</h3><p class="text-xs text-gray-400 mt-1">Abertura na região íntima, design erótico.</p></div>
                </div>
                 <textarea id="pantiesManual" placeholder="Ou escreva os detalhes aqui..." class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(17)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'pantiesManual', 'pantiesType', 19)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>
            
            <!-- Step 19: Tamanho da Calcinha -->
            <div id="step-19" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tamanho da Calcinha</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'XS', 'XS size')"><h3 class="font-bold">Extra Pequeno (XS)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'S', 'S size')"><h3 class="font-bold">Pequeno (S)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'M', 'M size')"><h3 class="font-bold">Médio (M)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'L', 'L size')"><h3 class="font-bold">Largo (L)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'XL', 'XL size')"><h3 class="font-bold">Extra Largo (XL)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(18)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(20)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 20: Cor e Detalhes da Calcinha -->
            <div id="step-20" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor da Calcinha</h2>
                <div id="pantiesColorGrid" class="grid grid-cols-6 md:grid-cols-9 gap-3 mb-4"></div>
                <h3 class="text-xl font-semibold mb-4 mt-6">Detalhes da Calcinha</h3>
                <textarea id="pantiesDetails" placeholder="Ex: azul claro com renda, transparente..." class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(19)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'pantiesDetails', 'pantiesDetails', 21)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 21: Sutiã -->
            <div id="step-21" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tipo de Sutiã</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Meia-taça', 'demi-cup bra')"><h3 class="font-bold text-sm">Meia-taça</h3><p class="text-xs text-gray-400 mt-1">Cobre metade dos seios, ideal para decotes.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Push-up', 'push-up bra')"><h3 class="font-bold text-sm">Push-up</h3><p class="text-xs text-gray-400 mt-1">Com bojo, aproxima e levanta os seios.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Balconet', 'balconette bra')"><h3 class="font-bold text-sm">Balconet</h3><p class="text-xs text-gray-400 mt-1">Decote reto, levanta os seios.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Alta Sustentação', 'high support bra')"><h3 class="font-bold text-sm">Alta Sustentação</h3><p class="text-xs text-gray-400 mt-1">Estruturado para seios volumosos.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Tomara que Caia', 'strapless bra')"><h3 class="font-bold text-sm">Tomara que Caia</h3><p class="text-xs text-gray-400 mt-1">Sem alças.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Nadador', 'racerback bra')"><h3 class="font-bold text-sm">Nadador</h3><p class="text-xs text-gray-400 mt-1">Alças se unem nas costas.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Triângulo', 'triangle bra')"><h3 class="font-bold text-sm">Triângulo</h3><p class="text-xs text-gray-400 mt-1">Sem aro, leve e natural.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Bralette', 'bralette')"><h3 class="font-bold text-sm">Bralette</h3><p class="text-xs text-gray-400 mt-1">Top de renda sem aro ou bojo.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Esportivo', 'sports bra')"><h3 class="font-bold text-sm">Esportivo</h3><p class="text-xs text-gray-400 mt-1">Alta compressão para atividades físicas.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Decote Profundo', 'plunge bra')"><h3 class="font-bold text-sm">Decote Profundo</h3><p class="text-xs text-gray-400 mt-1">Design em 'V' para decotes acentuados.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Cropped', 'cropped bra')"><h3 class="font-bold text-sm">Cropped</h3><p class="text-xs text-gray-400 mt-1">Longo como um top.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Strappy', 'strappy bra')"><h3 class="font-bold text-sm">Strappy</h3><p class="text-xs text-gray-400 mt-1">Com tiras decorativas no decote.</p></div>
                     <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Nenhum (Topless)', 'topless')"><h3 class="font-bold text-sm">Nenhum (Topless)</h3><p class="text-xs text-gray-400 mt-1">Sem sutiã, seios à mostra.</p></div>
                </div>
                <textarea id="braManual" placeholder="Ou escreva os detalhes aqui..." class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(20)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleBra(this)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 22: Tamanho do Sutiã -->
            <div id="step-22" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tamanho do Sutiã</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'XS', 'XS size')"><h3 class="font-bold">Extra Pequeno (XS)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'S', 'S size')"><h3 class="font-bold">Pequeno (S)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'M', 'M size')"><h3 class="font-bold">Médio (M)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'L', 'L size')"><h3 class="font-bold">Largo (L)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'XL', 'XL size')"><h3 class="font-bold">Extra Largo (XL)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(21)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(23)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 23: Cor e Detalhes do Sutiã -->
            <div id="step-23" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor do Sutiã</h2>
                <div id="braColorGrid" class="grid grid-cols-6 md:grid-cols-9 gap-3 mb-4"></div>
                <h3 class="text-xl font-semibold mb-4 mt-6">Detalhes do Sutiã</h3>
                <textarea id="braDetails" placeholder="Ex: azul claro com renda, transparente..." class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(22)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'braDetails', 'braDetails', 24)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 24: Iluminação -->
            <div id="step-24" class="step">
                <h2 class="text-2xl font-semibold mb-6">Iluminação</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Iluminação Cinematográfica', 'cinematic lighting')"><h3 class="font-bold text-sm">Cinematográfica</h3><p class="text-xs text-gray-400 mt-1">Luz dramática com alto contraste, como em filmes.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz Suave', 'soft light')"><h3 class="font-bold text-sm">Luz Suave</h3><p class="text-xs text-gray-400 mt-1">Difusa e sem sombras duras, ideal para retratos.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz Dura', 'hard light')"><h3 class="font-bold text-sm">Luz Dura</h3><p class="text-xs text-gray-400 mt-1">Cria sombras nítidas e definidas, intenso.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz de Rembrandt', 'Rembrandt lighting')"><h3 class="font-bold text-sm">Luz de Rembrandt</h3><p class="text-xs text-gray-400 mt-1">Triângulo de luz na bochecha sombreada.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Contraluz', 'backlight')"><h3 class="font-bold text-sm">Contraluz</h3><p class="text-xs text-gray-400 mt-1">Luz atrás do objeto, criando um contorno.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Golden Hour', 'golden hour lighting')"><h3 class="font-bold text-sm">Golden Hour</h3><p class="text-xs text-gray-400 mt-1">Luz quente e dourada do amanhecer/entardecer.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz de Velas', 'candlelight')"><h3 class="font-bold text-sm">Luz de Velas</h3><p class="text-xs text-gray-400 mt-1">Iluminação quente, suave e bruxuleante.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Neon', 'neon lighting')"><h3 class="font-bold text-sm">Neon</h3><p class="text-xs text-gray-400 mt-1">Luzes vibrantes e coloridas de ambientes urbanos.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz Subaquática', 'underwater lighting')"><h3 class="font-bold text-sm">Luz Subaquática</h3><p class="text-xs text-gray-400 mt-1">Luz difusa e azulada, com raios visíveis na água.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz de Recorte', 'rim light, kicker')"><h3 class="font-bold text-sm">Luz de Recorte</h3><p class="text-xs text-gray-400 mt-1">Luz de trás para separar o objeto do fundo.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Silhueta', 'silhouette')"><h3 class="font-bold text-sm">Silhueta</h3><p class="text-xs text-gray-400 mt-1">Objeto escuro contra um fundo claro.</p></div>
                    <div class="option-card p-3 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Nenhum', '')"><h3 class="font-bold text-sm">Nenhum (Escuridão)</h3><p class="text-xs text-gray-400 mt-1">Cena escura, com pouca ou nenhuma luz.</p></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="handleLightingPrevious()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(25)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 25: Fundo / Local -->
            <div id="step-25" class="step">
                <h2 class="text-2xl font-semibold mb-6">Fundo / Local</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Estúdio (Fundo Liso)', 'in a studio with a plain gray background')"><h3 class="font-bold">Estúdio</h3><p class="text-sm text-gray-400 mt-1">Ambiente controlado com fundo neutro.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Floresta Mística', 'in a mystical forest')"><h3 class="font-bold">Floresta Mística</h3><p class="text-sm text-gray-400 mt-1">Bosque denso com névoa e elementos mágicos.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Cidade Cyberpunk', 'in a cyberpunk city')"><h3 class="font-bold">Cidade Cyberpunk</h3><p class="text-sm text-gray-400 mt-1">Metrópole futurista com neon e chuva.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Quarto Aconchegante', 'in a cozy room')"><h3 class="font-bold">Quarto Aconchegante</h3><p class="text-sm text-gray-400 mt-1">Espaço íntimo com cama e iluminação suave.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Praia Ensolarada', 'on a sunny beach')"><h3 class="font-bold">Praia Ensolarada</h3><p class="text-sm text-gray-400 mt-1">Areia branca, mar azul-turquesa e céu limpo.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Biblioteca Antiga', 'in an old library')"><h3 class="font-bold">Biblioteca Antiga</h3><p class="text-sm text-gray-400 mt-1">Prateleiras de madeira com livros antigos.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Ruínas Desertas', 'in deserted ruins')"><h3 class="font-bold">Ruínas Desertas</h3><p class="text-sm text-gray-400 mt-1">Estruturas antigas tomadas pela natureza.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Salão de Baile Gótico', 'in a gothic ballroom')"><h3 class="font-bold">Salão de Baile Gótico</h3><p class="text-sm text-gray-400 mt-1">Arquitetura ornamentada e candelabros.</p></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Interior de Nave Espacial', 'inside a spaceship')"><h3 class="font-bold">Nave Espacial</h3><p class="text-sm text-gray-400 mt-1">Corredores metálicos e painéis de controle.</p></div>
                </div>
                 <textarea id="backgroundManual" placeholder="Ou escreva os detalhes aqui (Ex: em um beco chuvoso de neon...)" class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(24)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'backgroundManual', 'background', 26)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 26: Ação da Personagem -->
            <div id="step-26" class="step">
                <h2 class="text-2xl font-semibold mb-6">Ação da Personagem</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Olhando para a câmera', 'looking at the camera')"><h3 class="font-bold">Olhando para a câmera</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Ajustando a roupa', 'adjusting clothes')"><h3 class="font-bold">Ajustando a roupa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Interagindo com o cenário', 'interacting with the scenery')"><h3 class="font-bold">Interagindo com o cenário</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Em movimento', 'in motion')"><h3 class="font-bold">Em movimento</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Pensativa', 'thoughtful')"><h3 class="font-bold">Pensativa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Tocando um instrumento', 'playing an instrument')"><h3 class="font-bold">Tocando um instrumento</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Pintando em uma tela', 'painting on a canvas')"><h3 class="font-bold">Pintando em uma tela</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Bebendo café', 'drinking coffee')"><h3 class="font-bold">Bebendo café</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Olhando para o horizonte', 'looking at the horizon')"><h3 class="font-bold">Olhando para o horizonte</h3></div>
                </div>
                 <textarea id="actionManual" placeholder="Ou escreva os detalhes aqui (Ex: lendo um livro antigo...)" class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(25)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'actionManual', 'action', 27)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 27: Estilo Final e Qualidade -->
            <div id="step-27" class="step">
                <h2 class="text-2xl font-semibold mb-6">Estilo Final e Qualidade</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Fotografia Realista', 'realistic photography, photorealistic, 8k, ultra-detailed')"><h3 class="font-bold">Fotografia Realista</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Pintura Digital', 'digital painting, concept art')"><h3 class="font-bold">Pintura Digital</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Arte Conceitual', 'concept art, detailed illustration')"><h3 class="font-bold">Arte Conceitual</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Estilo Anime/Mangá', 'anime style, manga art')"><h3 class="font-bold">Estilo Anime/Mangá</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Preto e Branco', 'black and white photography')"><h3 class="font-bold">Preto e Branco</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Arte Barroca', 'baroque art style')"><h3 class="font-bold">Arte Barroca</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Aquarela', 'watercolor style')"><h3 class="font-bold">Aquarela</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Vaporwave', 'vaporwave aesthetic')"><h3 class="font-bold">Vaporwave</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Lente 50mm', '50mm lens, shallow depth of field')"><h3 class="font-bold">Lente 50mm</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Lente Teleobjetiva', 'telephoto lens, compressed background')"><h3 class="font-bold">Lente Teleobjetiva</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Estilo Cinematográfico', 'cinematic style, film grain')"><h3 class="font-bold">Estilo Cinematográfico</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Arte de Videogame (AAA)', 'AAA video game art, Unreal Engine')"><h3 class="font-bold">Arte de Videogame</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(26)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="generateAndTranslatePrompt()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Gerar Prompt</button>
                </div>
            </div>

            <!-- Final Step: Prompt -->
            <div id="step-final" class="step relative">
                 <div id="loadingOverlay" class="absolute inset-0 bg-gray-900 bg-opacity-90 flex flex-col items-center justify-center rounded-lg hidden z-10">
                    <svg class="animate-spin h-10 w-10 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="text-xl text-white">Processando e traduzindo o prompt...</p>
                </div>

                <h2 class="text-2xl font-semibold mb-2">Seu Prompt Profissional está Pronto!</h2>
                <p class="text-gray-400 mb-6">Copie o prompt e use-o no Fooocus. Para máxima consistência, use o mesmo "Código de Consistência" em todas as imagens.</p>
                
                <textarea id="finalPrompt" rows="8" class="w-full p-4 bg-gray-800 border border-gray-700 rounded-lg text-gray-300" readonly></textarea>
                <button id="copyButton" onclick="copyToClipboard('finalPrompt', 'copyButtonText', 'Copiar Prompt')" class="w-full mt-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" /><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" /></svg>
                    <span id="copyButtonText">Copiar Prompt</span>
                </button>

                <h3 class="text-xl font-semibold mb-2 mt-6">Prompt Negativo</h3>
                <textarea id="negativePrompt" rows="4" class="w-full p-4 bg-gray-800 border border-gray-700 rounded-lg text-gray-300" readonly></textarea>
                 <button id="copyNegativeButton" onclick="copyToClipboard('negativePrompt', 'copyNegativeButtonText', 'Copiar Negativo')" class="w-full mt-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" /><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" /></svg>
                    <span id="copyNegativeButtonText">Copiar Negativo</span>
                </button>

                <h3 class="text-xl font-semibold mb-2 mt-6">Código de Consistência (Seed)</h3>
                <div id="consistencySeed" class="w-full p-4 bg-gray-800 border border-gray-700 rounded-lg text-gray-300 font-mono"></div>
                 <button id="copySeedButton" onclick="copyToClipboard('consistencySeed', 'copySeedButtonText', 'Copiar Código')" class="w-full mt-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" /><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" /></svg>
                    <span id="copySeedButtonText">Copiar Código</span>
                </button>

                <div class="mt-8">
                    <button id="restartButton" onclick="restart()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>
                        Começar de Novo
                    </button>
                </div>
            </div>

        </main>
    </div>

    <script>
        // --- State Management ---
        let promptData = {
            accessories: [],
            sceneComposition: [],
            facialExpression: [],
            bodyPose: []
        };
        let currentStep = 1;
        const totalSteps = 27;

        // --- DOM Elements ---
        const progressBar = document.getElementById('progressBar');

        // --- Color Palette ---
        const colors = [
            { name: 'Branco', hex: '#FFFFFF', en: 'white' }, { name: 'Prata', hex: '#C0C0C0', en: 'silver' }, { name: 'Cinza', hex: '#808080', en: 'gray' }, { name: 'Preto', hex: '#000000', en: 'black' },
            { name: 'Marrom', hex: '#A52A2A', en: 'brown' }, { name: 'Bege', hex: '#F5F5DC', en: 'beige' }, { name: 'Marfim', hex: '#FFFFF0', en: 'ivory' }, { name: 'Creme', hex: '#FFFDD0', en: 'cream' },
            { name: 'Vermelho', hex: '#FF0000', en: 'red' }, { name: 'Laranja', hex: '#FFA500', en: 'orange' }, { name: 'Amarelo', hex: '#FFFF00', en: 'yellow' }, { name: 'Dourado', hex: '#FFD700', en: 'gold' },
            { name: 'Verde Limão', hex: '#32CD32', en: 'lime green' }, { name: 'Verde', hex: '#008000', en: 'green' }, { name: 'Verde Oliva', hex: '#808000', en: 'olive green' }, { name: 'Verde Musgo', hex: '#556B2F', en: 'moss green' },
            { name: 'Ciano', hex: '#00FFFF', en: 'cyan' }, { name: 'Azul Celeste', hex: '#87CEEB', en: 'sky blue' }, { name: 'Azul', hex: '#0000FF', en: 'blue' }, { name: 'Azul Marinho', hex: '#000080', en: 'navy blue' },
            { name: 'Roxo', hex: '#800080', en: 'purple' }, { name: 'Violeta', hex: '#EE82EE', en: 'violet' }, { name: 'Lavanda', hex: '#E6E6FA', en: 'lavender' }, { name: 'Índigo', hex: '#4B0082', en: 'indigo' },
            { name: 'Magenta', hex: '#FF00FF', en: 'magenta' }, { name: 'Rosa', hex: '#FFC0CB', en: 'pink' }, { name: 'Rosa Choque', hex: '#FF69B4', en: 'hot pink' }, { name: 'Salmão', hex: '#FA8072', en: 'salmon' },
            { name: 'Coral', hex: '#FF7F50', en: 'coral' }, { name: 'Pêssego', hex: '#FFDAB9', en: 'peach' }, { name: 'Turquesa', hex: '#40E0D0', en: 'turquoise' }, { name: 'Teal', hex: '#008080', en: 'teal' }
        ];

        // --- Translation Function ---
        async function translateFullPrompt(promptInPortuguese, retries = 3, delay = 1000) {
            const systemPrompt = `Your task is to translate a text fragment. This text is a mix of English and Portuguese. You MUST translate ALL Portuguese words and phrases into natural, descriptive English. Combine all information into a single, cohesive English paragraph. DO NOT leave any Portuguese words in the output. Respond ONLY with the final, fully translated English paragraph. Here is the text: "${promptInPortuguese}"`;
            const payload = { contents: [{ role: "user", parts: [{ text: systemPrompt }] }] };
            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            let lastError = null;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        let errorBody = await response.text();
                        try {
                           errorBody = JSON.parse(errorBody).error.message;
                        } catch(e) { /* Ignore if not JSON */ }
                        throw new Error(`API Error: ${response.status} - ${errorBody}`);
                    }

                    const result = await response.json();
                    const translatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (translatedText) return translatedText.trim();
                    throw new Error("Malformed API response");
                } catch (error) {
                    console.error(`Translation attempt ${i + 1} failed:`, error);
                    lastError = error;
                    if (i < retries - 1) {
                        await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                    }
                }
            }
            return `// A tradução falhou: ${lastError.message}. Verifique a sua chave de API, estado de faturação e a consola do navegador para erros de CORS. Prompt original: ${promptInPortuguese}`;
        }

        // --- Navigation ---
        function showStep(stepNumber) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            const nextStep = document.getElementById(`step-${stepNumber}`);
            if (nextStep) {
                nextStep.classList.add('active');
                currentStep = stepNumber;
                updateProgressBar();
            }
        }

        function goToStep(stepNumber) {
            if (stepNumber === 7) {
                const selectedLengthText = promptData.hairLength?.text || '';
                let lengthKey = 'all';
                if (selectedLengthText.includes('long')) lengthKey = 'long';
                else if (selectedLengthText.includes('medium')) lengthKey = 'medium';
                else if (selectedLengthText.includes('short')) lengthKey = 'short';
                else if (selectedLengthText.includes('shaved')) lengthKey = 'shaved';
                
                document.querySelectorAll('#step-7 .option-card').forEach(card => {
                    const compatibleLengths = card.dataset.lengths;
                    card.style.display = (!compatibleLengths || compatibleLengths.includes(lengthKey)) ? 'flex' : 'none';
                });
            }
            showStep(stepNumber);
        }
        
        function updateProgressBar() {
            const progress = (currentStep / totalSteps) * 100;
            progressBar.style.width = `${Math.min(progress, 100)}%`;
        }

        // --- Option Selection ---
        function handleSelection(element, key, value, textToStore) {
            const parentStep = element.closest('.step');
            parentStep.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');

            if (value !== 'Nenhum') {
                promptData[key] = { text: textToStore };
            } else {
                delete promptData[key];
            }

            setTimeout(() => {
                if (key === 'clothing') handleClothingChoice();
                else if (key === 'braType' && textToStore === 'topless') goToStep(24);
                else if (key === 'finalStyle') generateAndTranslatePrompt();
                else goToStep(currentStep + 1);
            }, 250);
        }
        
        function handleViewSelection(element, key, value, textToStore) {
            const parentGroup = element.closest('.grid');
            parentGroup.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');

            if (value !== 'Nenhum') {
                promptData[key] = { text: textToStore };
            } else {
                delete promptData[key];
            }
        }

        function toggleAccessoryStyle(button, styleId) {
            button.classList.toggle('selected');
            const accessoryGrid = document.getElementById(styleId);
            accessoryGrid.classList.toggle('hidden');
        }

        function handleMultiSelection(element, key, textToStore) {
            element.classList.toggle('selected');
            const index = promptData[key].findIndex(item => item.text === textToStore);
            if (index > -1) {
                promptData[key].splice(index, 1);
            } else {
                promptData[key].push({ text: textToStore });
            }
        }
        
        function getAgeDescription(age) {
            if (age >= 18 && age <= 22) return `a girl, approximately ${age} years old`;
            if (age >= 23 && age <= 30) return `a young woman, approximately ${age} years old`;
            if (age >= 31 && age <= 45) return `a woman, approximately ${age} years old`;
            if (age >= 46) return `a mature woman, approximately ${age} years old`;
            return `${age} years old`;
        }

        function handleNameAndAge() {
            const name = document.getElementById('characterName').value;
            const age = document.getElementById('characterAge').value;
            if (name) promptData.name = { text: name };
            
            if (age) {
                promptData.age = { text: getAgeDescription(parseInt(age, 10)) };
                promptData.ageIsNumeric = true;
                goToStep(3);
            } else {
                delete promptData.age;
                promptData.ageIsNumeric = false;
                goToStep(2);
            }
        }
        
        function handleManualInput(button, inputId, dataKey, nextStep) {
            const manualInputEl = document.getElementById(inputId);
            if (manualInputEl) {
                const manualInput = manualInputEl.value;
                if (manualInput) {
                    promptData[dataKey] = { text: manualInput };
                }
            }
            goToStep(nextStep);
        }

        function handleClothingChoice() {
            const choice = promptData.clothing?.text;
            if (choice === 'nude' || choice === 'clothed') {
                goToStep(24);
            } else {
                goToStep(18);
            }
        }
        
        function handleLightingPrevious() {
            const choice = promptData.clothing?.text;
            if (choice === 'nude' || choice === 'clothed') {
                goToStep(17);
            } else {
                goToStep(23);
            }
        }

        function handleBra(button) {
            const manualBra = document.getElementById('braManual').value;
            if (manualBra) {
                promptData.braType = { text: manualBra };
            }
            if (promptData.braType?.text === 'topless') {
                goToStep(24);
            } else {
                goToStep(22);
            }
        }

        // --- Prompt Generation & Translation ---
        function generateNegativePrompt(data) {
            const baseNegative = "deformed, bad anatomy, disfigured, poorly drawn face, mutation, mutated, extra limb, ugly, poorly drawn hands, missing limb, floating limbs, disconnected limbs, malformed hands, blurry, ((((mutated hands and fingers)))), watermark, watermarked, oversaturated, censored, distorted hands, amputation, missing hands, obese, doubled face, doubled hands, text, signature";
            
            const dynamicNegatives = new Set();

            const negativeMappings = {
                hairLength: {
                    'long hair': 'short hair, medium hair',
                    'medium hair': 'long hair, short hair',
                    'short hair': 'long hair, medium hair',
                    'shaved hair': 'long hair, medium hair, short hair, wig'
                },
                finalStyle: {
                    'realistic photography, photorealistic, 8k, ultra-detailed': 'painting, drawing, illustration, anime, cartoon, 3d render, sketch',
                    'digital painting, concept art': 'photo, photograph, photorealistic, 3d render, realism',
                    'anime style, manga art': 'photo, photograph, photorealistic, realism, 3d render',
                    'black and white photography': 'color, colorful'
                },
                bodyType: {
                    'thin body, low body fat': 'fat, chubby, overweight, muscular, plus-size',
                    'extremely thin body': 'fat, chubby, overweight, muscular, athletic, plus-size',
                    'chubby, soft body with some body fat': 'thin, skinny, slender, muscular, toned, athletic',
                    'fat, plump body with plenty of body fat': 'thin, skinny, slender, muscular, toned, athletic',
                    'muscular body with large muscle volume': 'skinny, thin, slender, chubby, fat, out of shape'
                }
            };

            for (const key in data) {
                const value = data[key]?.text;
                if (value && negativeMappings[key] && negativeMappings[key][value]) {
                    negativeMappings[key][value].split(',').forEach(term => dynamicNegatives.add(term.trim()));
                }
            }

            return [baseNegative, ...dynamicNegatives].join(', ');
        }

        function buildInitialPrompt() {
            const segments = [];
            
            let characterDesc = `A portrait of`;
            const characterParts = [
                promptData.name?.text, promptData.age?.text, promptData.ethnicity?.text,
                promptData.characterStyle ? `with a ${promptData.characterStyle.text}` : null
            ].filter(Boolean);
            if (characterParts.length > 0) characterDesc += ` ${characterParts.join(', ')}`;
            segments.push(`${characterDesc}.`);

            const physicalFeatures = [
                promptData.bodyType?.text, promptData.skinColor?.text,
                promptData.breasts?.text, promptData.hairLength?.text, promptData.hairStyle?.text,
                promptData.hairColor?.text, promptData.eyeColor?.text
            ].filter(Boolean);
            if (physicalFeatures.length > 0) segments.push(`She has ${physicalFeatures.join(', ')}.`);

            if (promptData.clothing) {
                if (promptData.clothing.text === 'nude') {
                    segments.push('She is completely nude.');
                } else if (promptData.clothing.text === 'underwear') {
                    const underwearParts = [];
                    if (promptData.braType?.text === 'topless') {
                        underwearParts.push('topless');
                    } else if (promptData.braType) {
                        const braDetails = [promptData.braColor?.text, promptData.braDetails?.text, promptData.braType.text, promptData.braSize?.text].filter(Boolean).join(' ');
                        underwearParts.push(`wearing a ${braDetails}`);
                    }
                    if (promptData.pantiesType) {
                        const pantiesDetails = [promptData.pantiesColor?.text, promptData.pantiesDetails?.text, promptData.pantiesType.text, promptData.pantiesSize?.text].filter(Boolean).join(' ');
                        underwearParts.push(underwearParts.length > 0 ? `and a pair of ${pantiesDetails}` : `wearing a pair of ${pantiesDetails}`);
                    }
                    if (underwearParts.length > 0) segments.push(`She is ${underwearParts.join(' ')}.`);
                } else if (promptData.clothing.text === 'clothed') {
                    segments.push('She is fully clothed.');
                }
            }
            
            const extraDetails = [];
            if (promptData.accessories?.length > 0) extraDetails.push(`accessorized with ${promptData.accessories.map(a => a.text).join(', ')}`);
            if (promptData.makeup) extraDetails.push(`wearing ${promptData.makeup.text}`);
            if (extraDetails.length > 0) segments.push(`She is ${extraDetails.join(' and ')}.`);

            const poseAndExpression = [
                promptData.characterView?.text,
                promptData.bodyPose.length > 0 ? `in a ${promptData.bodyPose.map(p => p.text).join(', ')} pose` : null,
                promptData.manualPose?.text,
                promptData.facialExpression.length > 0 ? `with a ${promptData.facialExpression.map(e => e.text).join(', ')} expression` : null
            ].filter(Boolean);
            if (poseAndExpression.length > 0) segments.push(`Posed ${poseAndExpression.join(' ')}.`);

            const environment = [
                promptData.background ? `${promptData.background.text}` : null,
                promptData.action ? `while ${promptData.action.text}` : null
            ].filter(Boolean);
            if (environment.length > 0) segments.push(`The scene is ${environment.join(' ')}.`);
            
            const finalDetails = [
                promptData.lighting?.text,
                ...(promptData.sceneComposition?.map(item => item.text) || []),
                promptData.finalStyle?.text
            ].filter(Boolean);

            if(finalDetails.length > 0) {
                 segments.push(finalDetails.join(', ') + '.');
            }
            
            const consistencyParts = [
                promptData.name?.text,
                promptData.age?.text,
                promptData.ethnicity?.text,
                promptData.hairColor?.text,
                promptData.hairStyle?.text || promptData.hairLength?.text,
                promptData.eyeColor?.text,
                promptData.bodyType?.text,
            ].filter(Boolean).map(s => s.split(',')[0]); 

            if (consistencyParts.length > 2) {
                segments.push(`(character sheet for consistency: ${consistencyParts.join(', ')})`);
            }

            return segments.join(' ').replace(/\s+/g, ' ').replace(/ \./g, '.').replace(/ ,/g, ',').trim();
        }

        async function generateAndTranslatePrompt() {
            handleManualInput(null, 'actionManual', 'action', 'final');
            showStep('final');

            const promptTextarea = document.getElementById('finalPrompt');
            const negativePromptTextarea = document.getElementById('negativePrompt');
            const seedDiv = document.getElementById('consistencySeed');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const allCopyButtons = document.querySelectorAll('#step-final button[onclick*="copyToClipboard"]');
            const restartButton = document.getElementById('restartButton');

            promptTextarea.value = '';
            negativePromptTextarea.value = '';
            seedDiv.textContent = '';
            loadingOverlay.classList.remove('hidden');
            allCopyButtons.forEach(btn => btn.disabled = true);
            restartButton.disabled = true;

            const initialPrompt = buildInitialPrompt();
            promptTextarea.value = "A traduzir...";

            const translatedPrompt = await translateFullPrompt(initialPrompt);
            promptTextarea.value = translatedPrompt;

            const negativePrompt = generateNegativePrompt(promptData);
            negativePromptTextarea.value = negativePrompt;

            const seed = Math.floor(Math.random() * 999999999999999);
            seedDiv.textContent = seed;

            loadingOverlay.classList.add('hidden');
            allCopyButtons.forEach(btn => btn.disabled = false);
            restartButton.disabled = false;
        }

        // --- Final Actions ---
        function copyToClipboard(elementId, buttonTextId, originalText) {
            const element = document.getElementById(elementId);
            const buttonTextElement = document.getElementById(buttonTextId);
            const textToCopy = element.tagName === 'TEXTAREA' ? element.value : element.innerText;

            // Create a temporary textarea to securely copy the text
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            
            // Make the textarea non-editable and invisible
            textArea.style.position = 'fixed';
            textArea.style.top = '-9999px';
            textArea.style.left = '-9999px';
            textArea.setAttribute('readonly', '');

            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (buttonTextElement) {
                    buttonTextElement.textContent = successful ? 'Copiado!' : 'Falha ao copiar';
                }
            } catch (err) {
                console.error('Não foi possível copiar o texto: ', err);
                if (buttonTextElement) {
                    buttonTextElement.textContent = 'Falha ao copiar';
                }
            }

            document.body.removeChild(textArea);

            if (buttonTextElement) {
                 setTimeout(() => {
                    buttonTextElement.textContent = originalText;
                }, 2000);
            }
        }
        
        function restart() {
            promptData = { accessories: [], sceneComposition: [], facialExpression: [], bodyPose: [] };
            document.querySelectorAll('textarea, input[type="text"], input[type="number"]').forEach(el => el.value = '');
            document.querySelectorAll('.option-card.selected').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.color-swatch.selected').forEach(s => s.classList.remove('selected'));
            document.querySelectorAll('[id$="-accessories"]').forEach(el => el.classList.add('hidden'));
            showStep(1);
        }
        
        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            const pantiesColorGrid = document.getElementById('pantiesColorGrid');
            const braColorGrid = document.getElementById('braColorGrid');
            
            colors.forEach(color => {
                const swatchPanties = document.createElement('div');
                swatchPanties.className = 'color-swatch';
                swatchPanties.style.backgroundColor = color.hex;
                swatchPanties.title = color.name;
                swatchPanties.onclick = () => {
                    promptData.pantiesColor = { text: color.en };
                    document.querySelectorAll('#pantiesColorGrid .color-swatch').forEach(s => s.classList.remove('selected'));
                    swatchPanties.classList.add('selected');
                    setTimeout(() => handleManualInput(null, 'pantiesDetails', 'pantiesDetails', 21), 250);
                };
                pantiesColorGrid.appendChild(swatchPanties);

                const swatchBra = document.createElement('div');
                swatchBra.className = 'color-swatch';
                swatchBra.style.backgroundColor = color.hex;
                swatchBra.title = color.name;
                swatchBra.onclick = () => {
                    promptData.braColor = { text: color.en };
                    document.querySelectorAll('#braColorGrid .color-swatch').forEach(s => s.classList.remove('selected'));
                    swatchBra.classList.add('selected');
                    setTimeout(() => handleManualInput(null, 'braDetails', 'braDetails', 24), 250);
                };
                braColorGrid.appendChild(swatchBra);
            });
        });
    </script>

</body>
</html>

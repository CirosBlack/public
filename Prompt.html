<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criador de Prompts Profissional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #F9FAFB;
        }
        .step {
            display: none;
        }
        .step.active {
            display: block;
        }
        .option-card {
            background-color: #1F2937;
            border: 2px solid #374151;
            transition: all 0.2s ease-in-out;
        }
        .option-card:hover {
            border-color: #4f46e580;
            transform: translateY(-2px);
        }
        .option-card.selected {
            border-color: #4F46E5;
            background-color: #3730a3;
        }
        .color-swatch {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease-in-out;
        }
        .color-swatch:hover, .color-swatch.selected {
            border-color: #F9FAFB;
            transform: scale(1.1);
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1F2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4F46E5;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4338CA;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Criador de Prompts Profissional</h1>
            <p class="text-lg text-gray-400">Controle cada detalhe da sua criação com um fluxo inteligente.</p>
        </header>

        <!-- Progress Bar -->
        <div class="w-full bg-gray-700 rounded-full h-2.5 mb-8">
            <div id="progressBar" class="bg-indigo-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
        </div>

        <main id="prompt-builder" class="bg-gray-900 p-6 md:p-8 rounded-2xl shadow-2xl">

            <!-- Step 1: Nome da Personagem -->
            <div id="step-1" class="step active">
                <h2 class="text-2xl font-semibold mb-2">Nome e Idade da Personagem</h2>
                <p class="text-gray-400 mb-6">Comece dando um nome e uma idade para sua personagem. A idade é opcional.</p>
                <div class="space-y-4">
                    <input type="text" id="characterName" placeholder="Digite o nome da personagem" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                    <input type="number" id="characterAge" placeholder="Digite a idade (opcional)" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                </div>
                 <div class="mt-8 flex justify-end w-full">
                    <button onclick="handleNameAndAge()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 2: Faixa Etária -->
            <div id="step-2" class="step">
                <h2 class="text-2xl font-semibold mb-6">Faixa Etária</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Menina (8-12 anos)', 'a young girl, approximately 8-12 years old')">
                        <h3 class="font-bold text-lg">Menina</h3><p class="text-sm text-gray-400">Aprox. 8-12 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Menina Adolescente (13-17 anos)', 'a teenage girl, approximately 13-17 years old')">
                        <h3 class="font-bold text-lg">Adolescente</h3><p class="text-sm text-gray-400">Aprox. 13-17 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Garota (18-22 anos)', 'a girl, approximately 18-22 years old')">
                        <h3 class="font-bold text-lg">Garota</h3><p class="text-sm text-gray-400">Aprox. 18-22 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Jovem Mulher (23-30 anos)', 'a young woman, approximately 23-30 years old')">
                        <h3 class="font-bold text-lg">Jovem Mulher</h3><p class="text-sm text-gray-400">Aprox. 23-30 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Mulher (31-45 anos)', 'a woman, approximately 31-45 years old')">
                        <h3 class="font-bold text-lg">Mulher</h3><p class="text-sm text-gray-400">Aprox. 31-45 anos.</p>
                    </div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'age', 'Mulher Madura (46+ anos)', 'a mature woman, approximately 46+ years old')">
                        <h3 class="font-bold text-lg">Mulher Madura</h3><p class="text-sm text-gray-400">Aprox. 46+ anos.</p>
                    </div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(1)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(3)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 3: Etnia -->
            <div id="step-3" class="step">
                <h2 class="text-2xl font-semibold mb-6">Etnia</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Caucasiana', 'Caucasian')"><h3 class="font-bold">Caucasiana</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Asiática (Leste)', 'East Asian')"><h3 class="font-bold">Asiática (Leste)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Afrodescendente', 'Afro-descendant')"><h3 class="font-bold">Afrodescendente</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Hispânica/Latina', 'Hispanic/Latina')"><h3 class="font-bold">Hispânica/Latina</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Brasileira', 'Brazilian with diverse features')"><h3 class="font-bold">Brasileira</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Indígena', 'Indigenous')"><h3 class="font-bold">Indígena</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Oriente Médio', 'Middle Eastern')"><h3 class="font-bold">Oriente Médio</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Sul Asiático', 'South Asian')"><h3 class="font-bold">Sul Asiático</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Multirracial', 'Multiracial')"><h3 class="font-bold">Multirracial</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'ethnicity', 'Polinésia', 'Polynesian')"><h3 class="font-bold">Polinésia</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer col-span-2 md:col-span-1" onclick="handleSelection(this, 'ethnicity', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(promptData.ageIsNumeric ? 1 : 2)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(4)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 4: Biotipo Físico -->
            <div id="step-4" class="step">
                <h2 class="text-2xl font-semibold mb-6">Biotipo Físico</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Ectomorfo', 'ectomorph body type, long and thin frame, naturally lean')"><h3 class="font-bold">Ectomorfo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Mesomorfo', 'mesomorph body type, athletic body, easily gains muscle')"><h3 class="font-bold">Mesomorfo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Endomorfo', 'endomorph body type, wide frame, more rounded shapes')"><h3 class="font-bold">Endomorfo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Triângulo (Pera)', 'pear-shaped body, wider hips than shoulders')"><h3 class="font-bold">Triângulo (Pera)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Triângulo Invertido', 'inverted triangle body, wider shoulders than hips')"><h3 class="font-bold">Triângulo Invertido</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Retângulo', 'rectangle body, similar shoulder, waist, and hip measurements')"><h3 class="font-bold">Retângulo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Ampulheta', 'hourglass body, similar shoulders and hips, thin waist')"><h3 class="font-bold">Ampulheta</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyType', 'Oval (Maçã)', 'apple-shaped body, wider waist than shoulders and hips')"><h3 class="font-bold">Oval (Maçã)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer col-span-2 md:col-span-1" onclick="handleSelection(this, 'bodyType', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(3)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(5)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>
            
            <!-- Step 5: Cor da Pele -->
            <div id="step-5" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor da Pele</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Clara', 'light, rosy skin tone')"><h3 class="font-bold">Pele Clara</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Pálida', 'pale, very light skin')"><h3 class="font-bold">Pele Pálida</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Bronzeada', 'tanned, golden skin tone')"><h3 class="font-bold">Pele Bronzeada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Oliva', 'olive, yellowish/greenish skin tone')"><h3 class="font-bold">Pele Oliva</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele Escura', 'dark brown skin tone')"><h3 class="font-bold">Pele Escura</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Pele com Sardas', 'skin with freckles')"><h3 class="font-bold">Pele com Sardas</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'skinColor', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(4)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(6)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 6: Comprimento do Cabelo -->
            <div id="step-6" class="step">
                <h2 class="text-2xl font-semibold mb-6">Comprimento do Cabelo</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Longo', 'long hair')"><h3 class="font-bold">Longo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Médio', 'medium hair')"><h3 class="font-bold">Médio</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Curto', 'short hair')"><h3 class="font-bold">Curto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Raspado', 'shaved hair')"><h3 class="font-bold">Raspado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairLength', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(5)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(7)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 7: Corte de Cabelo e Penteado -->
            <div id="step-7" class="step">
                <h2 class="text-2xl font-semibold mb-6">Corte de Cabelo e Penteado</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium,short" onclick="handleSelection(this, 'hairStyle', 'Chanel (Bob Cut)', 'bob cut hairstyle')"><h3 class="font-bold">Chanel (Bob Cut)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Long Bob (Lob)', 'long bob (lob) hairstyle')"><h3 class="font-bold">Long Bob (Lob)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Pixie Cut', 'pixie cut hairstyle')"><h3 class="font-bold">Pixie Cut</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium,short" onclick="handleSelection(this, 'hairStyle', 'Shaggy Hair', 'shaggy hair')"><h3 class="font-bold">Shaggy Hair</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Corte em Camadas', 'layered hair')"><h3 class="font-bold">Corte em Camadas</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short" onclick="handleSelection(this, 'hairStyle', 'Blunt Cut', 'blunt cut')"><h3 class="font-bold">Blunt Cut</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="short,shaved" onclick="handleSelection(this, 'hairStyle', 'Undercut', 'undercut hairstyle')"><h3 class="font-bold">Undercut</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="shaved" onclick="handleSelection(this, 'hairStyle', 'Buzz Cut (Raspado)', 'buzz cut')"><h3 class="font-bold">Buzz Cut</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="medium,short" onclick="handleSelection(this, 'hairStyle', 'Mullet', 'mullet hairstyle')"><h3 class="font-bold">Mullet</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium,short" onclick="handleSelection(this, 'hairStyle', 'Wolf Cut', 'wolf cut hairstyle')"><h3 class="font-bold">Wolf Cut</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Rabo de Cavalo', 'ponytail')"><h3 class="font-bold">Rabo de Cavalo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Coque Alto', 'high bun')"><h3 class="font-bold">Coque Alto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Trança Boxeadora', 'boxer braids')"><h3 class="font-bold">Trança Boxeadora</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Trança Embutida', 'french braid')"><h3 class="font-bold">Trança Embutida</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Meio Preso', 'half-up hairstyle')"><h3 class="font-bold">Meio Preso</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long" onclick="handleSelection(this, 'hairStyle', 'Ondas de Sereia', 'mermaid waves')"><h3 class="font-bold">Ondas de Sereia</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium,short" onclick="handleSelection(this, 'hairStyle', 'Efeito Molhado', 'wet hair look')"><h3 class="font-bold">Efeito Molhado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium" onclick="handleSelection(this, 'hairStyle', 'Coque Baixo', 'low bun')"><h3 class="font-bold">Coque Baixo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" data-lengths="long,medium,short" onclick="handleSelection(this, 'hairStyle', 'Slicked Back', 'slicked back hair')"><h3 class="font-bold">Slicked Back</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer col-span-2 md:col-span-3" data-lengths="long,medium,short,shaved" onclick="handleSelection(this, 'hairStyle', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(6)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(8)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 8: Cor do Cabelo -->
            <div id="step-8" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor do Cabelo</h2>
                <div class="grid grid-cols-3 md:grid-cols-4 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Preto', 'black hair')"><h3 class="font-bold">Preto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Loiro', 'blonde hair')"><h3 class="font-bold">Loiro</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Castanho', 'brown hair')"><h3 class="font-bold">Castanho</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Ruivo', 'red hair')"><h3 class="font-bold">Ruivo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Branco/Platinado', 'white/platinum hair')"><h3 class="font-bold">Branco/Platinado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Rosa', 'pink hair')"><h3 class="font-bold">Rosa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Azul', 'blue hair')"><h3 class="font-bold">Azul</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Verde', 'green hair')"><h3 class="font-bold">Verde</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'hairColor', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(7)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(9)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 9: Cor dos Olhos -->
            <div id="step-9" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor dos Olhos</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Azuis', 'blue eyes')"><h3 class="font-bold">Azuis</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Verdes', 'green eyes')"><h3 class="font-bold">Verdes</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Castanhos', 'brown eyes')"><h3 class="font-bold">Castanhos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Cor de Mel', 'honey-colored eyes')"><h3 class="font-bold">Cor de Mel</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Cinzas', 'gray eyes')"><h3 class="font-bold">Cinzas</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Pretos', 'black eyes')"><h3 class="font-bold">Pretos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Heterocromia', 'heterochromia eyes')"><h3 class="font-bold">Heterocromia</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'eyeColor', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(8)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(10)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 10: Tamanho dos Seios -->
            <div id="step-10" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tamanho dos Seios</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Reto (Flat)', 'flat chest')"><h3 class="font-bold">Reto (Flat)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Pequenos', 'small breasts')"><h3 class="font-bold">Pequenos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Médios', 'medium breasts')"><h3 class="font-bold">Médios</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Grandes', 'large breasts')"><h3 class="font-bold">Grandes</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Volumosos', 'voluminous breasts')"><h3 class="font-bold">Volumosos</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'breasts', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(9)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(11)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 11: Composição da Cena -->
            <div id="step-11" class="step">
                <h2 class="text-2xl font-semibold mb-6">Composição da Cena</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Corpo Inteiro', 'full body shot')"><h3 class="font-bold">Corpo Inteiro</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Plano Médio', 'medium shot')"><h3 class="font-bold">Plano Médio</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Close-up no Rosto', 'face close-up')"><h3 class="font-bold">Close-up no Rosto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Plano Detalhe', 'detail shot')"><h3 class="font-bold">Plano Detalhe</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Vista Traseira', 'from behind view')"><h3 class="font-bold">Vista Traseira</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Ângulo Baixo', 'low angle shot')"><h3 class="font-bold">Ângulo Baixo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Ângulo Alto', 'high angle shot')"><h3 class="font-bold">Ângulo Alto</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Ângulo Holandês', 'dutch angle shot')"><h3 class="font-bold">Ângulo Holandês</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Ponto de Vista (POV)', 'point of view (POV)')"><h3 class="font-bold">Ponto de Vista (POV)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Sobre o Ombro', 'over the shoulder shot')"><h3 class="font-bold">Sobre o Ombro</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Plano Americano', 'american shot')"><h3 class="font-bold">Plano Americano</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'sceneComposition', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(10)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(12)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 12: Estilo da Personagem -->
            <div id="step-12" class="step">
                <h2 class="text-2xl font-semibold mb-6">Estilo da Personagem</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Fantasia: Elfa', 'fantasy elf style')"><h3 class="font-bold">Fantasia: Elfa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Fantasia: Guerreira', 'fantasy warrior style')"><h3 class="font-bold">Fantasia: Guerreira</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Sci-Fi: Cyberpunk', 'sci-fi cyberpunk style')"><h3 class="font-bold">Sci-Fi: Cyberpunk</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Sci-Fi: Androide', 'sci-fi android style')"><h3 class="font-bold">Sci-Fi: Androide</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: Gótica', 'modern gothic style')"><h3 class="font-bold">Moderno: Gótica</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: E-girl', 'modern e-girl style')"><h3 class="font-bold">Moderno: E-girl</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: Fitness', 'modern fitness style')"><h3 class="font-bold">Moderno: Fitness</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Moderno: Casual', 'modern casual style')"><h3 class="font-bold">Moderno: Casual</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Histórico: Vitoriano', 'historical victorian style')"><h3 class="font-bold">Histórico: Vitoriano</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Histórico: Medieval', 'historical medieval style')"><h3 class="font-bold">Histórico: Medieval</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Steampunk', 'steampunk style')"><h3 class="font-bold">Steampunk</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'characterStyle', 'Pós-apocalíptico', 'post-apocalyptic style')"><h3 class="font-bold">Pós-apocalíptico</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer col-span-2 md:col-span-1" onclick="handleSelection(this, 'characterStyle', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(11)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(13)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 13: Maquiagem -->
            <div id="step-13" class="step">
                <h2 class="text-2xl font-semibold mb-6">Maquiagem</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Natural', 'natural makeup')"><h3 class="font-bold">Natural</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Olho Esfumado', 'smokey eyes makeup')"><h3 class="font-bold">Olho Esfumado</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Glamour', 'glamour makeup')"><h3 class="font-bold">Glamour</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Gótica', 'gothic makeup')"><h3 class="font-bold">Gótica</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Cores Neon', 'neon colors makeup')"><h3 class="font-bold">Cores Neon</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Artística', 'artistic makeup')"><h3 class="font-bold">Artística</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'makeup', 'Nenhuma', 'no makeup')"><h3 class="font-bold">Nenhuma</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(12)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(14)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 14: Acessórios -->
            <div id="step-14" class="step">
                <h2 class="text-2xl font-semibold mb-6">Acessórios (múltipla escolha)</h2>
                <div id="accessories-options" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wearing glasses')"><h3 class="font-bold">Óculos</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wearing a necklace')"><h3 class="font-bold">Colar</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wearing earrings')"><h3 class="font-bold">Brincos</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'with piercings')"><h3 class="font-bold">Piercings</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'with tattoos')"><h3 class="font-bold">Tatuagens</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wearing a hat')"><h3 class="font-bold">Chapéu</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleMultiSelection(this, 'accessories', 'wearing headphones')"><h3 class="font-bold">Fones de Ouvido</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(13)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(15)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 15: Expressão Facial -->
            <div id="step-15" class="step">
                <h2 class="text-2xl font-semibold mb-6">Expressão Facial</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Sedutora', 'seductive expression')"><h3 class="font-bold">Sedutora</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Confiante', 'confident expression')"><h3 class="font-bold">Confiante</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Triste', 'sad expression')"><h3 class="font-bold">Triste</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Irritada', 'angry expression')"><h3 class="font-bold">Irritada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Feliz/Sorrindo', 'happy/smiling expression')"><h3 class="font-bold">Feliz/Sorrindo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Pensativa', 'thoughtful expression')"><h3 class="font-bold">Pensativa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Assustada', 'scared expression')"><h3 class="font-bold">Assustada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Entediada', 'bored expression')"><h3 class="font-bold">Entediada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'facialExpression', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(14)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(16)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 16: Pose Corporal -->
            <div id="step-16" class="step">
                <h2 class="text-2xl font-semibold mb-6">Pose Corporal</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Em pé', 'standing pose')"><h3 class="font-bold">Em pé</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Sentada', 'sitting pose')"><h3 class="font-bold">Sentada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Deitada', 'lying down pose')"><h3 class="font-bold">Deitada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Andando', 'walking pose')"><h3 class="font-bold">Andando</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Correndo', 'running pose')"><h3 class="font-bold">Correndo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Dançando', 'dancing pose')"><h3 class="font-bold">Dançando</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Pose de Luta', 'fighting pose')"><h3 class="font-bold">Pose de Luta</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Pose de Ação', 'action pose')"><h3 class="font-bold">Pose de Ação</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'bodyPose', 'Encostada', 'leaning pose')"><h3 class="font-bold">Encostada</h3></div>
                </div>
                 <textarea id="bodyPoseManual" placeholder="Ou descreva a pose aqui..." class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(15)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'bodyPoseManual', 'bodyPose', 17)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 17: Tipo de Vestimenta -->
            <div id="step-17" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tipo de Vestimenta</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'clothing', 'nude', 'nude')"><h3 class="font-bold">Totalmente Nua</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'clothing', 'underwear', 'underwear')"><h3 class="font-bold">Apenas Roupa Íntima</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'clothing', 'clothed', 'clothed')"><h3 class="font-bold">Vestida</h3></div>
                </div>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(16)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleClothingChoice()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 18: Calcinha -->
            <div id="step-18" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tipo de Calcinha</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Clássica', 'classic panties')"><h3 class="font-bold">Clássica</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Biquíni', 'bikini-style panties')"><h3 class="font-bold">Biquíni</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Caleçon', 'boyshorts')"><h3 class="font-bold">Caleçon</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Cintura Alta', 'high-waisted panties')"><h3 class="font-bold">Cintura Alta</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Fio Dental', 'thong')"><h3 class="font-bold">Fio Dental</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Fio Duplo', 'g-string')"><h3 class="font-bold">Fio Duplo</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Tanga', 'tanga panties')"><h3 class="font-bold">Tanga</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'String', 'string panties')"><h3 class="font-bold">String</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Strappy', 'strappy panties')"><h3 class="font-bold">Strappy</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesType', 'Modeladora', 'shaping panties')"><h3 class="font-bold">Modeladora</h3></div>
                </div>
                 <textarea id="pantiesManual" placeholder="Ou escreva os detalhes aqui..." class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(17)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'pantiesManual', 'pantiesType', 19)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>
            
            <!-- Step 19: Tamanho da Calcinha -->
            <div id="step-19" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tamanho da Calcinha</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'XS', 'XS size')"><h3 class="font-bold">Extra Pequeno (XS)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'S', 'S size')"><h3 class="font-bold">Pequeno (S)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'M', 'M size')"><h3 class="font-bold">Médio (M)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'L', 'L size')"><h3 class="font-bold">Largo (L)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'XL', 'XL size')"><h3 class="font-bold">Extra Largo (XL)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'pantiesSize', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(18)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(20)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 20: Cor e Detalhes da Calcinha -->
            <div id="step-20" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor da Calcinha</h2>
                <div id="pantiesColorGrid" class="grid grid-cols-6 md:grid-cols-9 gap-3 mb-4"></div>
                <h3 class="text-xl font-semibold mb-4 mt-6">Detalhes da Calcinha</h3>
                <textarea id="pantiesDetails" placeholder="Ex: azul claro com renda, transparente..." class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(19)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'pantiesDetails', 'pantiesDetails', 21)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 21: Sutiã -->
            <div id="step-21" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tipo de Sutiã</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Meia-taça', 'demi-cup bra')"><h3 class="font-bold">Meia-taça</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Push-up', 'push-up bra')"><h3 class="font-bold">Push-up</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Balconet', 'balconette bra')"><h3 class="font-bold">Balconet</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Alta Sustentação', 'high support bra')"><h3 class="font-bold">Alta Sustentação</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Tomara que Caia', 'strapless bra')"><h3 class="font-bold">Tomara que Caia</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Nadador', 'racerback bra')"><h3 class="font-bold">Nadador</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Triângulo', 'triangle bra')"><h3 class="font-bold">Triângulo</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Bralette', 'bralette')"><h3 class="font-bold">Bralette</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Esportivo', 'sports bra')"><h3 class="font-bold">Esportivo</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Decote Profundo', 'plunge bra')"><h3 class="font-bold">Decote Profundo</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Cropped', 'cropped bra')"><h3 class="font-bold">Cropped</h3></div>
                     <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braType', 'Nenhum (Topless)', 'topless')"><h3 class="font-bold">Nenhum (Topless)</h3></div>
                </div>
                <textarea id="braManual" placeholder="Ou escreva os detalhes aqui..." class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(20)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleBra(this)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 22: Tamanho do Sutiã -->
            <div id="step-22" class="step">
                <h2 class="text-2xl font-semibold mb-6">Tamanho do Sutiã</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'XS', 'XS size')"><h3 class="font-bold">Extra Pequeno (XS)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'S', 'S size')"><h3 class="font-bold">Pequeno (S)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'M', 'M size')"><h3 class="font-bold">Médio (M)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'L', 'L size')"><h3 class="font-bold">Largo (L)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'XL', 'XL size')"><h3 class="font-bold">Extra Largo (XL)</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'braSize', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(21)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(23)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 23: Cor e Detalhes do Sutiã -->
            <div id="step-23" class="step">
                <h2 class="text-2xl font-semibold mb-6">Cor do Sutiã</h2>
                <div id="braColorGrid" class="grid grid-cols-6 md:grid-cols-9 gap-3 mb-4"></div>
                <h3 class="text-xl font-semibold mb-4 mt-6">Detalhes do Sutiã</h3>
                <textarea id="braDetails" placeholder="Ex: azul claro com renda, transparente..." class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(22)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'braDetails', 'braDetails', 24)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 24: Iluminação -->
            <div id="step-24" class="step">
                <h2 class="text-2xl font-semibold mb-6">Iluminação</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz Suave (Softbox)', 'softbox lighting')"><h3 class="font-bold">Luz Suave</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz Dura (Dramática)', 'dramatic hard lighting')"><h3 class="font-bold">Luz Dura</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz de Rembrandt', 'Rembrandt lighting')"><h3 class="font-bold">Luz de Rembrandt</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Contraluz (Backlight)', 'backlight')"><h3 class="font-bold">Contraluz</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Golden Hour', 'golden hour lighting')"><h3 class="font-bold">Golden Hour</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Luz de Velas', 'candlelight')"><h3 class="font-bold">Luz de Velas</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Neon', 'neon lighting')"><h3 class="font-bold">Neon</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Subaquática', 'underwater lighting')"><h3 class="font-bold">Subaquática</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'lighting', 'Nenhum', '')"><h3 class="font-bold">Nenhum</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="handleLightingPrevious()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="goToStep(25)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 25: Fundo / Local -->
            <div id="step-25" class="step">
                <h2 class="text-2xl font-semibold mb-6">Fundo / Local</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Estúdio (Fundo Liso)', 'in a studio with a plain background')"><h3 class="font-bold">Estúdio</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Floresta Mística', 'in a mystical forest')"><h3 class="font-bold">Floresta Mística</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Cidade Cyberpunk', 'in a cyberpunk city')"><h3 class="font-bold">Cidade Cyberpunk</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Quarto Aconchegante', 'in a cozy room')"><h3 class="font-bold">Quarto Aconchegante</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Praia Ensolarada', 'on a sunny beach')"><h3 class="font-bold">Praia Ensolarada</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Biblioteca Antiga', 'in an old library')"><h3 class="font-bold">Biblioteca Antiga</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Ruínas Desertas', 'in deserted ruins')"><h3 class="font-bold">Ruínas Desertas</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Salão de Baile Gótico', 'in a gothic ballroom')"><h3 class="font-bold">Salão de Baile Gótico</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'background', 'Interior de Nave Espacial', 'inside a spaceship')"><h3 class="font-bold">Interior de Nave Espacial</h3></div>
                </div>
                 <textarea id="backgroundManual" placeholder="Ou escreva os detalhes aqui (Ex: em um beco chuvoso de neon...)" class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(24)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'backgroundManual', 'background', 26)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 26: Ação da Personagem -->
            <div id="step-26" class="step">
                <h2 class="text-2xl font-semibold mb-6">Ação da Personagem</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Olhando para a câmera', 'looking at the camera')"><h3 class="font-bold">Olhando para a câmera</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Ajustando a roupa', 'adjusting clothes')"><h3 class="font-bold">Ajustando a roupa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Interagindo com o cenário', 'interacting with the scenery')"><h3 class="font-bold">Interagindo com o cenário</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Em movimento', 'in motion')"><h3 class="font-bold">Em movimento</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Pensativa', 'thoughtful')"><h3 class="font-bold">Pensativa</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Tocando um instrumento', 'playing an instrument')"><h3 class="font-bold">Tocando um instrumento</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Pintando em uma tela', 'painting on a canvas')"><h3 class="font-bold">Pintando em uma tela</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Bebendo café', 'drinking coffee')"><h3 class="font-bold">Bebendo café</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'action', 'Olhando para o horizonte', 'looking at the horizon')"><h3 class="font-bold">Olhando para o horizonte</h3></div>
                </div>
                 <textarea id="actionManual" placeholder="Ou escreva os detalhes aqui (Ex: lendo um livro antigo...)" class="mt-4 w-full p-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none"></textarea>
                 <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(25)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="handleManualInput(this, 'actionManual', 'action', 27)" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Próximo</button>
                </div>
            </div>

            <!-- Step 27: Estilo Final e Qualidade -->
            <div id="step-27" class="step">
                <h2 class="text-2xl font-semibold mb-6">Estilo Final e Qualidade</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Fotografia Realista', 'realistic photography, photorealistic, 8k, ultra-detailed')"><h3 class="font-bold">Fotografia Realista</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Pintura Digital', 'digital painting, concept art')"><h3 class="font-bold">Pintura Digital</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Arte Conceitual', 'concept art, detailed illustration')"><h3 class="font-bold">Arte Conceitual</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Estilo Anime/Mangá', 'anime style, manga art')"><h3 class="font-bold">Estilo Anime/Mangá</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Preto e Branco', 'black and white photography')"><h3 class="font-bold">Preto e Branco</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Arte Barroca', 'baroque art style')"><h3 class="font-bold">Arte Barroca</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Aquarela', 'watercolor style')"><h3 class="font-bold">Aquarela</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Vaporwave', 'vaporwave aesthetic')"><h3 class="font-bold">Vaporwave</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Lente 50mm', '50mm lens, shallow depth of field')"><h3 class="font-bold">Lente 50mm</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Lente Teleobjetiva', 'telephoto lens, compressed background')"><h3 class="font-bold">Lente Teleobjetiva</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Estilo Cinematográfico', 'cinematic style, film grain')"><h3 class="font-bold">Estilo Cinematográfico</h3></div>
                    <div class="option-card p-4 rounded-lg cursor-pointer" onclick="handleSelection(this, 'finalStyle', 'Arte de Videogame (AAA)', 'AAA video game art, Unreal Engine')"><h3 class="font-bold">Arte de Videogame</h3></div>
                </div>
                <div class="mt-8 flex justify-between w-full">
                    <button onclick="goToStep(26)" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Anterior</button>
                    <button onclick="generateAndTranslatePrompt()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Gerar Prompt</button>
                </div>
            </div>

            <!-- Final Step: Prompt -->
            <div id="step-final" class="step relative">
                 <div id="loadingOverlay" class="absolute inset-0 bg-gray-900 bg-opacity-90 flex flex-col items-center justify-center rounded-lg hidden z-10">
                    <svg class="animate-spin h-10 w-10 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="text-xl text-white">Processando e traduzindo o prompt...</p>
                </div>

                <h2 class="text-2xl font-semibold mb-2">Seu Prompt Profissional está Pronto!</h2>
                <p class="text-gray-400 mb-6">Copie o prompt abaixo e use-o em sua ferramenta de geração de imagem favorita.</p>
                <textarea id="finalPrompt" rows="10" class="w-full p-4 bg-gray-800 border border-gray-700 rounded-lg text-gray-300" readonly></textarea>
                <div class="mt-6 flex flex-col md:flex-row gap-4">
                    <button id="copyButton" onclick="copyPrompt()" class="w-full md:w-1/2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" /><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z" /></svg>
                        <span id="copyButtonText">Copiar Prompt</span>
                    </button>
                    <button id="restartButton" onclick="restart()" class="w-full md:w-1/2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>
                        Começar de Novo
                    </button>
                </div>
            </div>

        </main>
    </div>

    <script>
        // --- State Management ---
        let promptData = {
            accessories: []
        };
        let currentStep = 1;
        const totalSteps = 27;

        // --- DOM Elements ---
        const progressBar = document.getElementById('progressBar');

        // --- Color Palette ---
        const colors = [
            { name: 'Branco', hex: '#FFFFFF', en: 'white' }, { name: 'Prata', hex: '#C0C0C0', en: 'silver' }, { name: 'Cinza', hex: '#808080', en: 'gray' }, { name: 'Preto', hex: '#000000', en: 'black' },
            { name: 'Marrom', hex: '#A52A2A', en: 'brown' }, { name: 'Bege', hex: '#F5F5DC', en: 'beige' }, { name: 'Marfim', hex: '#FFFFF0', en: 'ivory' }, { name: 'Creme', hex: '#FFFDD0', en: 'cream' },
            { name: 'Vermelho', hex: '#FF0000', en: 'red' }, { name: 'Laranja', hex: '#FFA500', en: 'orange' }, { name: 'Amarelo', hex: '#FFFF00', en: 'yellow' }, { name: 'Dourado', hex: '#FFD700', en: 'gold' },
            { name: 'Verde Limão', hex: '#32CD32', en: 'lime green' }, { name: 'Verde', hex: '#008000', en: 'green' }, { name: 'Verde Oliva', hex: '#808000', en: 'olive green' }, { name: 'Verde Musgo', hex: '#556B2F', en: 'moss green' },
            { name: 'Ciano', hex: '#00FFFF', en: 'cyan' }, { name: 'Azul Celeste', hex: '#87CEEB', en: 'sky blue' }, { name: 'Azul', hex: '#0000FF', en: 'blue' }, { name: 'Azul Marinho', hex: '#000080', en: 'navy blue' },
            { name: 'Roxo', hex: '#800080', en: 'purple' }, { name: 'Violeta', hex: '#EE82EE', en: 'violet' }, { name: 'Lavanda', hex: '#E6E6FA', en: 'lavender' }, { name: 'Índigo', hex: '#4B0082', en: 'indigo' },
            { name: 'Magenta', hex: '#FF00FF', en: 'magenta' }, { name: 'Rosa', hex: '#FFC0CB', en: 'pink' }, { name: 'Rosa Choque', hex: '#FF69B4', en: 'hot pink' }, { name: 'Salmão', hex: '#FA8072', en: 'salmon' },
            { name: 'Coral', hex: '#FF7F50', en: 'coral' }, { name: 'Pêssego', hex: '#FFDAB9', en: 'peach' }, { name: 'Turquesa', hex: '#40E0D0', en: 'turquoise' }, { name: 'Teal', hex: '#008080', en: 'teal' }
        ];

        // --- Translation Function ---
        async function translateFullPrompt(promptInPortuguese, retries = 3, delay = 1000) {
            const systemPrompt = `Your task is to translate a text fragment used for image generation. This text is a mix of English and Portuguese. You MUST translate ALL Portuguese words and phrases into natural, descriptive English. Combine all information into a single, cohesive English paragraph. DO NOT leave any Portuguese words in the output. Respond ONLY with the final, fully translated English paragraph. Here is the text: "${promptInPortuguese}"`;
            const payload = { contents: [{ role: "user", parts: [{ text: systemPrompt }] }] };
            const apiKey = ""; // Canvas provides this
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const result = await response.json();
                    const translatedText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (translatedText) return translatedText.trim();
                    throw new Error("Malformed API response");
                } catch (error) {
                    console.error(`Translation attempt ${i + 1} failed:`, error);
                    if (i < retries - 1) {
                        await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                    } else {
                        return `// Translation failed. Original prompt: ${promptInPortuguese}`; // Fallback
                    }
                }
            }
        }

        // --- Navigation ---
        function showStep(stepNumber) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            const nextStep = document.getElementById(`step-${stepNumber}`);
            if (nextStep) {
                nextStep.classList.add('active');
                currentStep = stepNumber;
                updateProgressBar();
            }
        }

        function goToStep(stepNumber) {
            if (stepNumber === 7) {
                const selectedLengthText = promptData.hairLength?.text || '';
                let lengthKey = 'all';
                if (selectedLengthText.includes('long')) lengthKey = 'long';
                else if (selectedLengthText.includes('medium')) lengthKey = 'medium';
                else if (selectedLengthText.includes('short')) lengthKey = 'short';
                else if (selectedLengthText.includes('shaved')) lengthKey = 'shaved';
                
                document.querySelectorAll('#step-7 .option-card').forEach(card => {
                    const compatibleLengths = card.dataset.lengths;
                    card.style.display = (!compatibleLengths || compatibleLengths.includes(lengthKey)) ? 'block' : 'none';
                });
            }
            showStep(stepNumber);
        }
        
        function updateProgressBar() {
            const progress = (currentStep / totalSteps) * 100;
            progressBar.style.width = `${Math.min(progress, 100)}%`;
        }

        // --- Option Selection ---
        function handleSelection(element, key, value, textToStore) {
            const parentStep = element.closest('.step');
            parentStep.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');

            if (value !== 'Nenhum') {
                promptData[key] = { text: textToStore };
            } else {
                delete promptData[key];
            }

            setTimeout(() => {
                if (key === 'clothing') handleClothingChoice();
                else if (key === 'braType' && textToStore === 'topless') goToStep(24);
                else if (key === 'finalStyle') generateAndTranslatePrompt();
                else goToStep(currentStep + 1);
            }, 250);
        }

        function handleMultiSelection(element, key, textToStore) {
            element.classList.toggle('selected');
            const index = promptData[key].findIndex(item => item.text === textToStore);
            if (index > -1) {
                promptData[key].splice(index, 1);
            } else {
                promptData[key].push({ text: textToStore });
            }
        }
        
        function getAgeDescription(age) {
            if (age >= 8 && age <= 12) return 'a young girl';
            if (age >= 13 && age <= 17) return 'a teenage girl';
            if (age >= 18 && age <= 22) return 'a girl';
            if (age >= 23 && age <= 30) return 'a young woman';
            if (age >= 31 && age <= 45) return 'a woman';
            if (age >= 46) return 'a mature woman';
            return `${age} years old`;
        }

        function handleNameAndAge() {
            const name = document.getElementById('characterName').value;
            const age = document.getElementById('characterAge').value;
            if (name) promptData.name = { text: name };
            
            if (age) {
                promptData.age = { text: getAgeDescription(parseInt(age, 10)) };
                promptData.ageIsNumeric = true;
                goToStep(3);
            } else {
                delete promptData.age;
                promptData.ageIsNumeric = false;
                goToStep(2);
            }
        }
        
        function handleManualInput(button, inputId, dataKey, nextStep) {
            const manualInput = document.getElementById(inputId).value;
            if (manualInput) {
                promptData[dataKey] = { text: manualInput };
            }
            goToStep(nextStep);
        }

        function handleClothingChoice() {
            const choice = promptData.clothing?.text;
            if (choice === 'nude' || choice === 'clothed') {
                goToStep(24);
            } else {
                goToStep(18);
            }
        }
        
        function handleLightingPrevious() {
            const choice = promptData.clothing?.text;
            if (choice === 'nude' || choice === 'clothed') {
                goToStep(17);
            } else {
                goToStep(23);
            }
        }

        function handleBra(button) {
            const manualBra = document.getElementById('braManual').value;
            if (manualBra) {
                promptData.braType = { text: manualBra };
            }
            if (promptData.braType?.text === 'topless') {
                goToStep(24);
            } else {
                goToStep(22);
            }
        }

        // --- Prompt Generation & Translation ---
        function buildInitialPrompt() {
            const segments = [];
            if (promptData.sceneComposition) segments.push(promptData.sceneComposition.text);
            if (promptData.finalStyle) segments.push(promptData.finalStyle.text);
            
            let characterDesc = `A portrait of`;
            const characterParts = [
                promptData.name?.text, promptData.age?.text, promptData.ethnicity?.text,
                promptData.characterStyle ? `with a ${promptData.characterStyle.text}` : null
            ].filter(Boolean);
            if (characterParts.length > 0) characterDesc += ` ${characterParts.join(', ')}`;
            segments.push(`${characterDesc}.`);

            const physicalFeatures = [
                promptData.bodyType ? `a ${promptData.bodyType.text}` : null, promptData.skinColor?.text,
                promptData.breasts?.text, promptData.hairLength?.text, promptData.hairStyle?.text,
                promptData.hairColor?.text, promptData.eyeColor?.text
            ].filter(Boolean);
            if (physicalFeatures.length > 0) segments.push(`She has ${physicalFeatures.join(', ')}.`);

            if (promptData.clothing) {
                if (promptData.clothing.text === 'nude') {
                    segments.push('She is completely nude.');
                } else if (promptData.clothing.text === 'underwear') {
                    const underwearParts = [];
                    if (promptData.braType?.text === 'topless') {
                        underwearParts.push('topless');
                    } else if (promptData.braType) {
                        const braDetails = [promptData.braColor?.text, promptData.braDetails?.text, promptData.braType.text, promptData.braSize?.text].filter(Boolean).join(' ');
                        underwearParts.push(`wearing a ${braDetails}`);
                    }
                    if (promptData.pantiesType) {
                        const pantiesDetails = [promptData.pantiesColor?.text, promptData.pantiesDetails?.text, promptData.pantiesType.text, promptData.pantiesSize?.text].filter(Boolean).join(' ');
                        underwearParts.push(underwearParts.length > 0 ? `and a pair of ${pantiesDetails}` : `wearing a pair of ${pantiesDetails}`);
                    }
                    if (underwearParts.length > 0) segments.push(`She is ${underwearParts.join(' ')}.`);
                } else if (promptData.clothing.text === 'clothed') {
                    segments.push('She is fully clothed.');
                }
            }
            
            const extraDetails = [];
            if (promptData.accessories?.length > 0) extraDetails.push(`accessorized with ${promptData.accessories.map(a => a.text).join(', ')}`);
            if (promptData.makeup) extraDetails.push(`wearing ${promptData.makeup.text}`);
            if (extraDetails.length > 0) segments.push(`She is ${extraDetails.join(' and ')}.`);

            const poseAndExpression = [
                promptData.bodyPose ? `in a ${promptData.bodyPose.text}` : null,
                promptData.facialExpression ? `with a ${promptData.facialExpression.text}` : null
            ].filter(Boolean);
            if (poseAndExpression.length > 0) segments.push(`Posed ${poseAndExpression.join(' ')}.`);

            const environment = [
                promptData.background ? `${promptData.background.text}` : null,
                promptData.action ? `while ${promptData.action.text}` : null
            ].filter(Boolean);
            if (environment.length > 0) segments.push(`The scene is ${environment.join(' ')}.`);
            if (promptData.lighting) segments.push(`${promptData.lighting.text}.`);

            return segments.join(' ').replace(/\s+/g, ' ').replace(/ \./g, '.').replace(/ ,/g, ',').trim();
        }

        async function generateAndTranslatePrompt() {
            handleManualInput(null, 'actionManual', 'action', 'final');
            
            showStep('final');
            const promptTextarea = document.getElementById('finalPrompt');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const copyButton = document.getElementById('copyButton');
            const restartButton = document.getElementById('restartButton');

            const initialPrompt = buildInitialPrompt();
            promptTextarea.value = initialPrompt;

            loadingOverlay.classList.remove('hidden');
            copyButton.disabled = true;
            restartButton.disabled = true;

            const translatedPrompt = await translateFullPrompt(initialPrompt);

            promptTextarea.value = translatedPrompt;
            loadingOverlay.classList.add('hidden');
            copyButton.disabled = false;
            restartButton.disabled = false;
        }

        // --- Final Actions ---
        function copyPrompt() {
            const promptText = document.getElementById('finalPrompt');
            const copyButtonText = document.getElementById('copyButtonText');
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(promptText.value).then(() => {
                    copyButtonText.textContent = 'Copiado!';
                    setTimeout(() => { copyButtonText.textContent = 'Copiar Prompt'; }, 2000);
                }).catch(err => {
                    fallbackCopyTextToClipboard(promptText, copyButtonText);
                });
            } else {
                fallbackCopyTextToClipboard(promptText, copyButtonText);
            }
        }

        function fallbackCopyTextToClipboard(textArea, buttonTextElement) {
            textArea.select();
            textArea.setSelectionRange(0, 99999);
            try {
                document.execCommand('copy');
                buttonTextElement.textContent = 'Copiado!';
                setTimeout(() => { buttonTextElement.textContent = 'Copiar Prompt'; }, 2000);
            } catch (err) {
                console.error('Fallback copy failed:', err);
                buttonTextElement.textContent = 'Falhou!';
                 setTimeout(() => { buttonTextElement.textContent = 'Copiar Prompt'; }, 2000);
            }
        }
        
        function restart() {
            promptData = { accessories: [] };
            document.querySelectorAll('textarea, input[type="text"], input[type="number"]').forEach(el => el.value = '');
            document.querySelectorAll('.option-card.selected').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.color-swatch.selected').forEach(s => s.classList.remove('selected'));
            showStep(1);
        }
        
        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            const pantiesColorGrid = document.getElementById('pantiesColorGrid');
            const braColorGrid = document.getElementById('braColorGrid');
            
            colors.forEach(color => {
                const swatchPanties = document.createElement('div');
                swatchPanties.className = 'color-swatch';
                swatchPanties.style.backgroundColor = color.hex;
                swatchPanties.title = color.name;
                swatchPanties.onclick = () => {
                    promptData.pantiesColor = { text: color.en };
                    document.querySelectorAll('#pantiesColorGrid .color-swatch').forEach(s => s.classList.remove('selected'));
                    swatchPanties.classList.add('selected');
                    handleManualInput(null, 'pantiesDetails', 'pantiesDetails', 21);
                };
                pantiesColorGrid.appendChild(swatchPanties);

                const swatchBra = document.createElement('div');
                swatchBra.className = 'color-swatch';
                swatchBra.style.backgroundColor = color.hex;
                swatchBra.title = color.name;
                swatchBra.onclick = () => {
                    promptData.braColor = { text: color.en };
                    document.querySelectorAll('#braColorGrid .color-swatch').forEach(s => s.classList.remove('selected'));
                    swatchBra.classList.add('selected');
                    handleManualInput(null, 'braDetails', 'braDetails', 24);
                };
                braColorGrid.appendChild(swatchBra);
            });
        });
    </script>

</body>
</html>
